<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.146">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Analyse et conception de logiciels - 6&nbsp; Principes GRASP</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./DetteTechnique.html" rel="next">
<link href="./DSS.html" rel="prev">
<link href="./images/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer"
  }
}</script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet" data-external="1">
<style type="text/css">
@font-face {
font-family: 'xkcd Script';
src: url('web-resources/xkcd-font/xkcd-script.ttf') format('truetype');
}
</style>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Principes GRASP</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title d-none d-lg-block"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Principes GRASP</span></h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Analyse et conception de logiciels</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/fuhrmanator/log210-ndc-quarto/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Download" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-download"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="./Analyse-et-conception-de-logiciels.pdf">
            <i class="bi bi-bi-file-pdf pe-1"></i>
          Download PDF
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="./Analyse-et-conception-de-logiciels.epub">
            <i class="bi bi-bi-journal pe-1"></i>
          Download ePub
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">index.html</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AnalyseConception.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Analyse et conception de logiciels</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Besoins.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Besoins (exigences)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./CasUtilisation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Cas d’utilisation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MDD.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Modèle du domaine (MDD, modèle conceptuel)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DSS.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Diagrammes de séquence système (DSS)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./GRASP.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Principes GRASP</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DetteTechnique.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Dette technique</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Contrats.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Contrats d’opération</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./RDCU.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Réalisations de cas d’utilisation (RDCU)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TDD.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Développement piloté par les tests</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Réusinage.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Réusinage (Refactorisation)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TravailEquipe.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Développement de logiciels en équipe</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Outils-UML.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Outils pour la modélisation UML</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./GRASP-GoF.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Décortiquer les patterns GoF avec GRASP</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Fiabilité.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Fiabilité</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DiagrammesActivites.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Diagrammes d’activités</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DiagrammesEtats.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Diagrammes d’états</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ConceptionPackages.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Conception de packages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DiagrammesDeploiement.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Diagrammes de déploiement et de composants</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Laboratoires.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Laboratoires</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">Bibliographie</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Annexes</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Annexe_Cas_utilisation_Réserver_livre.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Cas d’utilisation – Réserver un livre de la bibliothèque</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Annexe_Cas_utilisation_Traiter_vente.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Cas d’utilisation – Traiter une vente</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Annexe_Cas_utilisation_Ouvrir_caisse.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Cas d’utilisation – Ouvrir la caisse</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table des matières</h2>
   
  <ul>
  <li><a href="#sec-SpectreDeLaConception" id="toc-sec-SpectreDeLaConception" class="nav-link active" data-scroll-target="#sec-SpectreDeLaConception"><span class="toc-section-number">6.1</span>  Spectre de la conception</a></li>
  <li><a href="#tbl-GRASPTable" id="toc-tbl-GRASPTable" class="nav-link" data-scroll-target="#tbl-GRASPTable"><span class="toc-section-number">6.2</span>  Tableau des principes GRASP</a></li>
  <li><a href="#grasp-et-rdcu" id="toc-grasp-et-rdcu" class="nav-link" data-scroll-target="#grasp-et-rdcu"><span class="toc-section-number">6.3</span>  GRASP et RDCU</a></li>
  <li><a href="#grasp-et-patterns-gof" id="toc-grasp-et-patterns-gof" class="nav-link" data-scroll-target="#grasp-et-patterns-gof"><span class="toc-section-number">6.4</span>  GRASP et patterns GoF</a></li>
  <li><a href="#exercices" id="toc-exercices" class="nav-link" data-scroll-target="#exercices"><span class="toc-section-number">6.5</span>  Exercices</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/fuhrmanator/log210-ndc-quarto/issues/new" class="toc-action">Signaler un problème</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>GRASP est un acronyme de l’expression anglaise «&nbsp;General Responsibility Assignment Software Patterns&nbsp;», c’est-à-dire les principes pour affecter les responsabilités logicielles dans les classes.</p>
<p>Une approche GRASP devrait amener un design vers la modularité et la maintenabilité.</p>
<p>L’acronyme d’une expression vulgarisée pourrait être POMM&nbsp;: «&nbsp;Principes pour déterminer Où Mettre une Méthode.&nbsp;»</p>
<p>En tant qu’ingénieur logiciel ou ingénieure logiciel, vous devez souvent décider où placer une méthode (dans quelle classe), et cette décision ne devrait pas être prise de manière arbitraire, mais plutôt en suivant les directives d’ingénierie favorisant la modularité.</p>
<p>Alors, les GRASP sont les directives qui vous aident à prendre des décisions de conception, menant à un design avec moins de couplage inutile et avec des classes plus cohésives. Les classes cohésives sont plus faciles à comprendre, à maintenir et à réutiliser.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><i class="fa-solid fa-hat-cowboy-side" aria-label="hat-cowboy-side"></i> Avez-vous déjà une bonne expérience en <span style="white-space:nowrap">programmation ?</span> Avez-vous l’habitude de coder rapidement des solutions qui <span style="white-space:nowrap">fonctionnent ?</span> Si la réponse est oui, alors travailler avec les principes GRASP peut être un défi pour vous. Dans la méthodologie enseignée dans ce manuel, vous devez être en mesure de justifier vos choix de conception, et cela va vous ralentir au début (réflexe du «&nbsp;hacking cowboy&nbsp;» <span style="white-space:nowrap">peut-être ?)</span> Le but avec les principes GRASP est de (ré)apprendre à faire du code qui fonctionne, mais qui est également facile à maintenir. C’est normal au début que ça prenne plus de temps, car il faut réfléchir pour appliquer les principes. Une fois que vous aurez l’habitude d’utiliser les GRASP, vous serez encore rapide avec votre développement, mais, en plus, votre design sera meilleur sur le plan de la maintenabilité, et vous aurez plus de confiance dans vos choix.</p>
</div>
</div>
</div>
<section id="sec-SpectreDeLaConception" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="sec-SpectreDeLaConception"><span class="header-section-number">6.1</span> Spectre de la conception</h2>
<p>Neal Ford <span class="citation" data-cites="Ford2009">(<a href="references.html#ref-Ford2009" role="doc-biblioref">2009</a>)</span> a proposé la notion d’effort pour la conception qu’il a nommée le «&nbsp;Spectre de la conception&nbsp;». La <a href="#fig-SpectreConception">figure&nbsp;<span>6.1</span></a> illustre le principe.</p>
<div id="fig-SpectreConception" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="291.6px" preserveaspectratio="none" style="width:363px;height:291px;background:#00000000;" version="1.1" viewbox="0 0 363 291" width="363.6px" zoomandpan="magnify"><defs></defs><g><!--MD5=[91e5c1a6682de6d8b3900af52601d7a9]
class hacking--><g id="elem_hacking"><polygon fill="#FFFFFF" points="71.4,115.2,71.4,115.2841,74.28,115.0343,77.16,115.2773,80.04,115.3599,82.92,114.9146,85.8,115.2,85.7881,115.1713,86.159,115.2181,86.5898,115.4097,87.0624,115.702,87.3912,115.6474,87.9213,116.0787,88.1259,116.1634,87.8641,116.4065,88.1997,116.8969,88.6082,117.4176,88.5926,117.7626,88.8,118.2,88.8819,118.2,88.7617,129.401,89.0142,140.6019,89.087,151.8029,89.5028,163.0038,88.8,174.2048,89.048,174.3075,88.8753,174.733,88.5426,175.0923,88.4441,175.5486,88.3566,176.0094,87.9213,176.3261,87.8109,176.0596,87.6009,176.7526,87.0274,176.568,86.7302,177.0506,86.1485,176.8461,85.8,177.2048,85.8,177.1774,82.92,177.5014,80.04,177.1853,77.16,177.2469,74.28,177.3403,71.4,177.2048,71.4637,177.3586,70.9751,177.0276,70.5954,176.9595,70.0396,176.4661,69.7465,176.607,69.2787,176.3261,69.4813,176.41,69.2672,175.9699,69.1538,175.5714,68.5729,174.9794,68.3347,174.5292,68.4,174.2048,67.6543,174.2048,68.3293,163.0038,68.1642,151.8029,69.2177,140.6019,68.1904,129.401,68.4,118.2,68.2732,118.1475,68.6601,117.8107,68.505,117.2494,68.7354,116.8477,69.3428,116.6023,69.2787,116.0787,69.3454,116.2397,69.8154,116.1744,70.0779,115.6083,70.6003,115.6694,71.0661,115.5939,71.4,115.2" style="stroke:#FFFFFF;stroke-width:0.6;"></polygon><text fill="#000000" font-family="xkcd Script" font-size="36" lengthadjust="spacing" textlength="13.2" x="72" y="160.4384">[</text></g><!--MD5=[aac2e74d767a6781859b7847ed17f912]
class Nh--><g id="elem_Nh"><polygon fill="#FFFFFF" points="11.4,249.6,11.4,249.8522,23.6182,249.1028,35.8364,249.8319,48.0545,250.0796,60.2727,248.7439,72.4909,249.5067,84.7091,249.0882,96.9273,249.1398,109.1455,249.5182,121.3636,248.7704,133.5818,250.2644,145.8,249.6,145.7035,249.3671,146.194,249.7027,146.7146,250.1111,147.0597,250.0955,147.5075,250.3282,147.9213,250.4787,147.9095,250.4738,148.163,250.9303,148.3612,251.3638,148.665,251.8411,148.8723,252.2785,148.8,252.6,149.0717,252.6,148.9019,258.4671,148.9854,264.3341,149.0809,270.2012,148.5115,276.0683,148.8,281.9354,149.0507,282.0392,148.5147,282.3142,148.6458,282.8656,148.0899,283.1324,148.0717,283.6219,147.9213,284.0567,148.0348,284.3308,147.4896,284.2144,147.0889,284.4471,146.7004,284.709,146.288,284.9135,145.8,284.9354,145.8,284.9307,133.5818,285.28,121.3636,284.2485,109.1455,285.2766,96.9273,285.5932,84.7091,285.4688,72.4909,285.671,60.2727,284.3557,48.0545,284.1527,35.8364,284.1897,23.6182,284.8647,11.4,284.9354,11.3699,284.8627,11.08,285.0114,10.5247,284.5193,10.0747,284.2814,9.7379,284.3168,9.2787,284.0567,9.0322,283.9546,8.9111,283.553,9.167,283.3075,8.9125,282.8506,8.8472,282.4721,8.4,281.9354,8.2713,281.9354,8.5277,276.0683,8.6362,270.2012,8.211,264.3341,8.3617,258.4671,8.4,252.6,8.4466,252.6193,8.8166,252.2755,8.7499,251.7508,9.0982,251.398,8.8983,250.8182,9.2787,250.4787,9.175,250.2284,9.78,250.4891,10.0175,249.8623,10.6294,250.1396,11.0074,249.8521,11.4,249.6" style="stroke:#FFFFFF;stroke-width:0.6;"></polygon><text fill="#000000" font-family="xkcd Script" font-size="16.8" lengthadjust="spacing" textlength="133.2" x="12" y="273.9111">« Hacking cowboy »</text></g><!--MD5=[0c6e9717770683435cef62d310f4741c]
class agile--><g id="elem_agile"><polygon fill="#FFFFFF" points="133.8,129,133.8,129.0841,136.125,128.8343,138.45,129.0773,140.775,129.1599,143.1,128.7146,145.425,129,145.4131,128.9713,145.784,129.0181,146.2148,129.2097,146.6874,129.502,147.0162,129.4474,147.5463,129.8787,147.7509,129.9634,147.4891,130.2065,147.8247,130.6969,148.2332,131.2176,148.2176,131.5626,148.425,132,148.4523,132,148.4122,137.8671,148.4964,143.7341,148.5207,149.6012,148.6593,155.4683,148.425,161.3354,148.673,161.4381,148.5003,161.8636,148.1676,162.2229,148.0691,162.6791,147.9816,163.1399,147.5463,163.4567,147.4359,163.1902,147.2259,163.8832,146.6524,163.6986,146.3552,164.1812,145.7735,163.9767,145.425,164.3354,145.425,164.308,143.1,164.632,140.775,164.3159,138.45,164.3775,136.125,164.4708,133.8,164.3354,133.8637,164.4892,133.3751,164.1582,132.9954,164.09,132.4396,163.5966,132.1465,163.7375,131.6787,163.4567,131.8813,163.5406,131.6672,163.1005,131.5538,162.702,130.9729,162.1099,130.7347,161.6598,130.8,161.3354,130.5514,161.3354,130.7764,155.4683,130.7214,149.6012,131.0726,143.7341,130.7301,137.8671,130.8,132,130.6732,131.9475,131.0601,131.6107,130.905,131.0494,131.1354,130.6477,131.7428,130.4023,131.6787,129.8787,131.7454,130.0397,132.2154,129.9744,132.4779,129.4083,133.0003,129.4694,133.4661,129.3939,133.8,129" style="stroke:#FFFFFF;stroke-width:0.6;"></polygon><text fill="#000000" font-family="xkcd Script" font-size="16.8" font-weight="bold" lengthadjust="spacing" textlength="10.425" x="134.4" y="153.3111">+</text></g><!--MD5=[690125be0f31ed8879cbad5baf62f37b]
class Na--><g id="elem_Na"><polygon fill="#FFFFFF" points="40.8,8.4,40.8,8.6522,52.5,7.9028,64.2,8.6319,75.9,8.8796,87.6,7.5439,99.3,8.3067,111,7.8882,122.7,7.9398,134.4,8.3182,146.1,7.5704,157.8,9.0644,169.5,7.6437,181.2,8.4,181.1697,8.3269,181.6904,8.7354,182.0354,8.7198,182.4832,8.9524,182.8922,9.0911,183.3213,9.2787,183.3873,9.306,183.5854,9.7395,183.8892,10.2169,184.0965,10.6542,184.2753,11.0797,184.2,11.4,184.3019,11.4,184.3854,17.2671,184.4809,23.1341,183.9115,29.0012,184.4714,34.8683,184.2,40.7354,184.0904,40.69,184.2215,41.2413,183.6656,41.5081,183.6475,41.9977,183.7711,42.5459,183.3213,42.8567,183.3139,42.8387,182.9132,43.0713,182.5246,43.3333,182.1122,43.5377,181.6237,43.5582,181.2,43.7354,181.2,44.08,169.5,43.0485,157.8,44.0766,146.1,44.3932,134.4,44.2688,122.7,44.471,111,43.1557,99.3,42.9527,87.6,42.9897,75.9,43.6647,64.2,43.4995,52.5,44.5531,40.8,43.7354,40.7733,43.6708,40.3232,43.4329,39.9864,43.4683,39.4251,42.9617,39.0235,42.8406,38.6787,42.8567,38.9185,42.956,38.6639,42.4991,38.5986,42.1206,38.0326,41.5346,38.0937,41.2085,37.8,40.7354,38.0362,40.7354,37.611,34.8683,37.7617,29.0012,37.8504,23.1341,38.0607,17.2671,37.8,11.4,37.7985,11.3994,38.1467,11.0465,37.9468,10.4667,38.0769,10.0235,38.6891,9.78,38.6787,9.2787,38.5689,9.0137,39.1809,9.291,39.5588,9.0036,39.9105,8.6525,40.3216,8.445,40.8,8.4" style="stroke:#FFFFFF;stroke-width:0.6;"></polygon><text fill="#000000" font-family="xkcd Script" font-size="16.8" lengthadjust="spacing" textlength="33.6" x="99" y="32.7111">Agile</text></g><!--MD5=[16640f6e1912083e427fb21a04882258]
class waterfall--><g id="elem_waterfall"><polygon fill="#FFFFFF" points="253.2,115.2,253.2,115.2841,256.32,115.0343,259.44,115.2773,262.56,115.3599,265.68,114.9146,268.8,115.2,268.7881,115.1713,269.159,115.2181,269.5898,115.4097,270.0624,115.702,270.3912,115.6474,270.9213,116.0787,271.1259,116.1634,270.8641,116.4065,271.1997,116.8969,271.6082,117.4176,271.5926,117.7626,271.8,118.2,271.8819,118.2,271.7617,129.401,272.0142,140.6019,272.087,151.8029,272.5028,163.0038,271.8,174.2048,272.048,174.3075,271.8753,174.733,271.5426,175.0923,271.4441,175.5486,271.3566,176.0094,270.9213,176.3261,270.8109,176.0596,270.6009,176.7526,270.0274,176.568,269.7302,177.0506,269.1485,176.8461,268.8,177.2048,268.8,177.1774,265.68,177.5014,262.56,177.1853,259.44,177.2469,256.32,177.3403,253.2,177.2048,253.2637,177.3586,252.7751,177.0276,252.3954,176.9595,251.8396,176.4661,251.5465,176.607,251.0787,176.3261,251.2813,176.41,251.0672,175.9699,250.9538,175.5714,250.3729,174.9794,250.1347,174.5292,250.2,174.2048,249.4543,174.2048,250.1293,163.0038,249.9642,151.8029,251.0177,140.6019,249.9904,129.401,250.2,118.2,250.0732,118.1475,250.4601,117.8107,250.305,117.2494,250.5354,116.8477,251.1428,116.6023,251.0787,116.0787,251.1454,116.2397,251.6154,116.1744,251.8779,115.6083,252.4003,115.6694,252.8661,115.5939,253.2,115.2" style="stroke:#FFFFFF;stroke-width:0.6;"></polygon><text fill="#000000" font-family="xkcd Script" font-size="36" lengthadjust="spacing" textlength="14.4" x="253.8" y="160.4384">]</text></g><!--MD5=[a579e73932ed0dc046258936e4452539]
class Ncp--><g id="elem_Ncp"><polygon fill="#FFFFFF" points="229.8,8.4,229.8,8.6522,242.04,7.9028,254.28,8.6319,266.52,8.8796,278.76,7.5439,291,8.3067,303.24,7.8882,315.48,7.9398,327.72,8.3182,339.96,7.5704,352.2,8.4,352.2847,8.6046,352.5278,8.3428,353.0183,8.6784,353.5389,9.0868,353.8839,9.0712,354.3213,9.2787,354.3465,9.2891,354.4853,9.6981,354.7388,10.1545,354.9369,10.5881,355.2407,11.0654,355.2,11.4,355.4684,11.4,355.4717,17.2671,355.3019,23.1341,355.3854,29.0012,355.4809,34.8683,355.2,40.7354,354.9335,40.625,355.275,41.2635,354.739,41.5385,354.8701,42.0899,354.3141,42.3566,354.3213,42.8567,354.3108,42.8314,354.0106,43.3065,353.4653,43.1902,353.0646,43.4228,352.6761,43.6848,352.2,43.7354,352.2,44.2348,339.96,43.7307,327.72,44.08,315.48,43.0485,303.24,44.0766,291,44.3932,278.76,44.2688,266.52,44.471,254.28,43.1557,242.04,42.9527,229.8,43.7354,229.7049,43.5057,229.3667,43.5379,228.9214,43.3113,228.6315,43.46,228.0762,42.9679,227.6787,42.8567,227.5519,42.8042,227.5873,42.4674,227.0808,41.9061,226.9596,41.5044,227.2156,41.259,226.8,40.7354,226.9743,40.7354,227.0938,34.8683,226.6713,29.0012,226.9277,23.1341,227.0362,17.2671,226.8,11.4,226.6254,11.3277,226.9403,10.9611,227.198,10.5708,227.5681,10.227,227.5014,9.7023,227.6787,9.2787,227.7495,9.4496,228.0182,8.8983,228.4235,8.6769,229.0286,8.9376,229.266,8.3108,229.8,8.4" style="stroke:#FFFFFF;stroke-width:0.6;"></polygon><text fill="#000000" font-family="xkcd Script" font-size="16.8" lengthadjust="spacing" textlength="121.2" x="230.4" y="32.7111">« Cascade pure »</text></g><!--MD5=[06c56e4bf5bfb90b5df790873d9bd480]
link hacking to agile--><g id="link_hacking_agile"><path d="M89.124,146.4 L89.124,146.5121 L97.4376,146.179 L105.7512,146.5031 L114.0648,146.6132 L122.3784,146.0195 L130.692,146.4 " fill="none" style="stroke:#000000;stroke-width:2.4;"></path></g><!--MD5=[353a5ccc1305b03aba621a47c5665eaa]
link agile to waterfall--><g id="link_agile_waterfall"><path d="M149.268,146.4 L149.268,146.7363 L161.871,145.7371 L174.474,146.7093 L187.077,147.0395 L199.68,145.2586 L212.283,146.2757 L224.886,145.7176 L237.489,145.7864 L250.092,146.4 " fill="none" style="stroke:#000000;stroke-width:2.4;"></path></g><!--MD5=[f628d46872c00f827ae4d18143092d73]
link Ncp to waterfall--><g id="link_Ncp_waterfall"><path d="M286.824,43.44 L287.15,43.5227 L283.4194,54.163 L281.5998,65.2881 L279.1578,76.2553 L274.6696,86.7033 L272.8935,97.8394 L270.252,108.756 " fill="none" style="stroke:#000000;stroke-width:1.2;stroke-dasharray:7.0,7.0;"></path><polygon fill="#000000" points="268.728,114.768,268.7939,114.8202,270.0648,112.8116,271.7222,111.1089,273.2538,109.3065,274.3714,107.1767,276.062,105.5002,276.0462,105.4734,274.8067,106.0446,273.6469,106.7506,272.5426,107.5504,271.2472,108.0271,270.2195,108.9563,270.4101,109.0691,269.3113,107.6595,268.7689,106.579,268.2945,105.5388,267.425,104.2648,266.7633,103.1138,266.7903,103.1183,267.1437,105.4425,267.6196,107.7874,268.0365,110.1222,268.5661,112.4761,268.728,114.768" style="stroke:#000000;stroke-width:1.2;"></polygon></g><!--MD5=[3a0a81021b7919ad0f2d6d20c7c0563c]
link Na to agile--><g id="link_Na_agile"><path d="M115.008,43.44 L115.3347,43.5196 L117.1239,54.6093 L120.8285,66.1658 L123.9093,77.5703 L124.939,88.4749 L128.6872,100.042 L130.905,111.2362 L134.328,122.724 " fill="none" style="stroke:#000000;stroke-width:1.2;stroke-dasharray:7.0,7.0;"></path><polygon fill="#000000" points="135.828,128.904,135.9107,128.919,136.0853,126.5485,136.7448,124.2657,137.2464,121.9543,137.2286,119.5491,137.9298,117.2738,137.9032,117.2576,137.0791,118.3455,136.3888,119.5147,135.7917,120.7404,134.8737,121.7713,134.4051,123.0752,134.5201,123.2644,133.1139,122.1548,132.0434,121.5977,131.014,121.108,129.7461,120.2261,128.6037,119.5504,128.6253,119.5671,130.0384,121.4133,131.5499,123.3355,133.014,125.221,134.5685,127.1765,135.828,128.904" style="stroke:#000000;stroke-width:1.2;"></polygon></g><!--MD5=[dfe2f61f9837529d325013c3040df5d5]
reverse link hacking to Nh--><g id="link_hacking_Nh"><path d="M78.6,183.78 L78.9363,183.78 L77.9371,196.9344 L78.9093,210.0888 L79.2395,223.2432 L77.4586,236.3976 L78.6,249.552 " fill="none" style="stroke:#000000;stroke-width:1.2;stroke-dasharray:7.0,7.0;"></path><polygon fill="#000000" points="78.6,177.732,78.6768,177.7661,77.4886,179.8247,76.7507,182.0834,75.8661,184.2769,74.4992,186.2561,73.8,188.532,73.778,188.51,74.6394,187.4514,75.6115,186.5035,76.6607,185.6327,77.4445,184.4965,78.6,183.732,78.7566,183.8886,79.3817,184.5137,80.4641,185.5961,81.6022,186.7342,82.4157,187.5477,83.4,188.532,83.4249,188.5431,82.4283,186.3668,81.5453,184.241,80.6074,182.0908,79.7741,179.9871,78.6,177.732" style="stroke:#000000;stroke-width:1.2;"></polygon></g><!--MD5=[50204dc39febc479518fb8a818d96f98]
@startuml
!include ecriture.pumlinclude
scale 1.2
skinparam classBorderColor hidden
skinparam classBackgroundColor hidden
skinparam classArrowColor black
hide stereotypes
hide empty members
class "<size:30>[" as hacking
class "« Hacking cowboy »" as Nh
class "**+**" as agile <<middle>>
class "            Agile          " as Na
class "<size:30>]" as waterfall
class "« Cascade pure »" as Ncp

hacking -right[bold]- agile
agile -right[bold]- waterfall

waterfall <-u[dashed]- Ncp
agile <-u[dashed]- Na
hacking <-d[dashed]- Nh
@enduml

@startuml
skinparam style strictuml
skinparam backgroundcolor transparent
skinparam defaultfontname xkcd Script
skinparam handwritten true
scale 1.2
skinparam classBorderColor hidden
skinparam classBackgroundColor hidden
skinparam classArrowColor black
hide stereotypes
hide empty members
class "<size:30>[" as hacking
class "« Hacking cowboy »" as Nh
class "**+**" as agile <<middle>>
class "            Agile          " as Na
class "<size:30>]" as waterfall
class "« Cascade pure »" as Ncp

hacking -right[bold]- agile
agile -right[bold]- waterfall

waterfall <-u[dashed]- Ncp
agile <-u[dashed]- Na
hacking <-d[dashed]- Nh
@enduml

PlantUML version 1.2022.6(Tue Jun 21 17:34:49 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;6.1: Spectre de la conception <span class="citation" data-cites="Ford2009">(<a href="references.html#ref-Ford2009" role="doc-biblioref">Ford, 2009</a>)</span>.</figcaption><p></p>
</figure>
</div>
<p>À une extrémité, il y a la mentalité de mettre presque zéro effort pour une conception, que l’on nomme «&nbsp;hacking cowboy&nbsp;». C’est le cas d’un hackathon (un marathon de programmation durant 24 ou 48 heures où il faut produire une solution rapidement), au cours duquel vous ne feriez pas un logiciel avec 10 patterns GoF et vous ne feriez pas non plus les diagrammes UML pour réfléchir à votre architecture. Vous savez aussi que le code produit lors d’un hackathon ne sera pas facile à maintenir. Le seul but de cette activité est de développer du code qui marche pour montrer une idée intéressante.</p>
<p>Une situation similaire s’applique à certains contextes d’entreprise, par exemple une entreprise en démarrage qui a seulement un financement pour six mois. Si une solution de <a href="https://en.wikipedia.org/wiki/Minimum_viable_product">«&nbsp;produit minimum viable&nbsp;» (MVP en anglais)</a>&nbsp;<i class="fa-brands fa-wikipedia-w" aria-label="wikipedia-w"></i>&nbsp;n’existe pas à la fin de la période de financement, l’entreprise n’existera plus, car il n’y aura pas une seconde période de financement. Si, par contre, l’entreprise est financée pour une seconde période, la conception du code pourrait avoir besoin de beaucoup de soin et de maintenance, car elle aura été préalablement négligée. Cette négligence de la conception (pour la maintenabilité) est aussi nommée la <a href="DetteTechnique.html">dette technique</a>.</p>
<p>À l’autre extrémité du spectre de la conception, on retrouve ce que l’on nomme «&nbsp;Cascade pure&nbsp;», où beaucoup d’effort a été déployé pour la conception. Dans le cycle de vie en cascade, on met un temps fixe (par exemple plusieurs mois) à étudier la conception. Comme toute chose poussée à l’extrême, ce n’est pas idéal non plus. Dans son livre, <span class="citation" data-cites="craig_uml_2005">Larman (<a href="references.html#ref-craig_uml_2005" role="doc-biblioref">2005</a>)</span> explique en détail des problèmes posés par une approche en cascade. En dépit des problèmes dus à l’approche en cascade, elle est encore utilisée dans certains domaines, par exemple les logiciels pour le contrôle d’avions ou le contrôle d’appareils médicaux. La sécurité et la robustesse des logiciels sont très importantes, alors on passe beaucoup de temps à vérifier et à valider la conception. Puisque les exigences sont plus stables (et que les développeurs et les développeuses ont <em>a priori</em> une meilleure compréhension du domaine), l’approche en cascade n’est pas si mal. Pourtant, le coût pour produire des logiciels certifiés est énorme.</p>
<p>Le spectre de la conception est très important pour le monde réel, parce qu’une ingénieure ou un ingénieur devrait pouvoir s’adapter selon les attentes de son travail. Le dogme sur «&nbsp;la bonne manière&nbsp;» de développer un logiciel est souvent sans contexte. C’est le contexte de l’entreprise pour laquelle vous travaillez qui peut quantifier les efforts à mettre sur la conception. Cependant, méfiez-vous des entreprises qui ne portent aucune attention à la conception (l’extrémité «&nbsp;hacking cowboy&nbsp;» du spectre), même si l’on vous dit que c’est «&nbsp;agile&nbsp;». <!-- Si vous négligez complètement la conception, vous pouvez peut-être produire du code qui fonctionne plus vite à court terme.
Mais il faudra repayer la dette technique un jour.
Un moyen de gérer cette dette technique est de *réusiner* (anglais refactor). --></p>
</section>
<section id="tbl-GRASPTable" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="tbl-GRASPTable"><span class="header-section-number">6.2</span> Tableau des principes GRASP</h2>
<p>Voici un extrait du livre de <span class="citation" data-cites="craig_uml_2005">Larman (<a href="references.html#ref-craig_uml_2005" role="doc-biblioref">2005</a>)</span>.</p>

<!-- Attention: le tableau suivant a été généré avec l'éditeur "Visual" de RStudio -->
<div id="tbl-tableGRASP" class="anchored">
<table class="table">
<caption>Tableau&nbsp;6.1: Patterns (principes) GRASP</caption>
<colgroup>
<col style="width: 25%">
<col style="width: 75%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Pattern</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Expert en Information<br>
<em>F16.11/A17.11</em>&nbsp;<i class="fa-solid fa-book" aria-label="book"></i></td>
<td style="text-align: left;"><p>Un principe général de conception d’objets et d’affectation des responsabilités.</p>
<p>Affectez une responsabilité à l’expert – la classe qui possède les informations nécessaires pour s’en acquitter.</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">Créateur<br>
<em>F16.10/A17.10</em>&nbsp;<i class="fa-solid fa-book" aria-label="book"></i></td>
<td style="text-align: left;"><p>Qui <span style="white-space:nowrap">crée ?</span> (Notez que Fabrique Concrète est une solution de rechange courante.)</p>
<p>Affectez à la classe B la responsabilité de créer une instance de la classe A si l’une des assertions suivantes est vraie&nbsp;:</p>
<ol type="1">
<li>B contient A</li>
<li>B agrège A [à favoriser]</li>
<li>B a les données pour initialiser A</li>
<li>B enregistre A</li>
<li>B utilise étroitement A</li>
</ol></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Contrôleur<br>
<em>F16.13/A17.13</em>&nbsp;<i class="fa-solid fa-book" aria-label="book"></i></td>
<td style="text-align: left;"><p>Quel est le premier objet en dehors de la couche présentation qui reçoit et coordonne («&nbsp;contrôle&nbsp;») les opérations <span style="white-space:nowrap">système ?</span></p>
<p>Affectez une responsabilité à la classe qui correspond à l’une de ces définitions&nbsp;:</p>
<ol type="1">
<li>[Contrôleur de façade] [Cette classe] représente le système global, un «&nbsp;objet racine&nbsp;», un équipement ou un sous-système (contrôleur de façade).</li>
<li>[Contrôleur de session] [Cette classe] représente un scénario de cas d’utilisation dans lequel l’opération système se produit (<em>contrôleur de session</em> ou contrôleur de cas d’utilisation). [On la nomme GestionnaireX, où X est le nom du cas d’utilisation.]</li>
</ol></td>
</tr>
<tr class="even">
<td style="text-align: left;">Faible Couplage<br>
(évaluation)<br>
<em>F16.12/A17.12</em>&nbsp;<i class="fa-solid fa-book" aria-label="book"></i></td>
<td style="text-align: left;"><p>Comment minimiser les <span style="white-space:nowrap">dépendances ?</span></p>
<p>Affectez les responsabilités de sorte que le couplage (inutile) demeure faible. Employez ce principe pour évaluer les alternatives.</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Forte Cohésion<br>
(évaluation)<br>
<em>F16.14/A17.14</em>&nbsp;<i class="fa-solid fa-book" aria-label="book"></i></td>
<td style="text-align: left;"><p>Comment conserver les objets cohésifs, compréhensibles, gérables et, en conséquence, obtenir un Faible <span style="white-space:nowrap">Couplage ?</span></p>
<p>Affectez les responsabilités de sorte que les classes demeurent cohésives. Employez ce principe pour évaluer les différentes solutions.</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">Polymorphisme<br>
<em>F22.1/A25.1</em>&nbsp;<i class="fa-solid fa-book" aria-label="book"></i></td>
<td style="text-align: left;"><p>Qui est responsable quand le comportement varie selon le <span style="white-space:nowrap">type ?</span></p>
<p>Lorsqu’un comportement varie selon le type (classe), affectez la responsabilité de ce comportement – avec des opérations polymorphes – aux types selon lesquels le comportement varie.</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Fabrication Pure <em>F22.2/A25.2</em>&nbsp;<i class="fa-solid fa-book" aria-label="book"></i></td>
<td style="text-align: left;"><p>En cas de situation désespérée, que faire quand vous ne voulez pas transgresser les principes de Faible Couplage et de Forte <span style="white-space:nowrap">Cohésion ?</span></p>
<p>Affectez un ensemble très cohésif de responsabilités à une classe «&nbsp;comportementale&nbsp;» artificielle qui ne représente pas un concept du domaine — une entité fabriquée pour augmenter la cohésion, diminuer le couplage et faciliter la réutilisation.</p></td>
</tr>
<tr class="even">
<td style="text-align: left;">Indirection<br>
<em>F22.3/A25.3</em>&nbsp;<i class="fa-solid fa-book" aria-label="book"></i></td>
<td style="text-align: left;"><p>Comment affecter les responsabilités pour éviter le couplage <span style="white-space:nowrap">direct ?</span></p>
<p>Affectez la responsabilité à un objet qui sert d’intermédiaire avec les autres composants ou services.</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Protection des Variations<br>
<em>F22.4/A25.4</em>&nbsp;<i class="fa-solid fa-book" aria-label="book"></i></td>
<td style="text-align: left;"><p>Comment affecter les responsabilités aux objets, sous-systèmes et systèmes de sorte que les variations ou l’instabilité de ces éléments n’aient pas d’impact négatif sur les <span style="white-space:nowrap">autres ?</span></p>
<p>Identifiez les points de variation ou d’instabilité prévisibles et affectez les responsabilités afin de créer une «&nbsp;interface&nbsp;» stable autour d’eux.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="grasp-et-rdcu" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="grasp-et-rdcu"><span class="header-section-number">6.3</span> GRASP et RDCU</h2>
<p>Les principes GRASP sont utilisés dans les réalisations de cas d’utilisation (RDCU). On s’en sert pour annoter les décisions de conception, pour rendre explicites (documenter) les choix. Voir la section <a href="RDCU.html">Réalisations de cas d’utilisation (RDCU)</a> pour plus d’informations.</p>
</section>
<section id="grasp-et-patterns-gof" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="grasp-et-patterns-gof"><span class="header-section-number">6.4</span> GRASP et patterns GoF</h2>
<p>On peut voir les principes GRASP comme des généralisations (principes de base) des patterns GoF. Voir la section <a href="GRASP-GoF.html">Décortiquer les patterns GoF avec GRASP</a> pour plus d’informations.</p>
</section>
<section id="exercices" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="exercices"><span class="header-section-number">6.5</span> Exercices</h2>
<div id="exr-GRASP_GOF_polymorphisme" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 6.1 (GRASP Polymorphisme) </strong></span>Soit le diagramme de classe sur la <a href="#fig-GRASP_polymorphisme_ex">figure&nbsp;<span>6.2</span></a> modélisant l’exemple de <span class="citation" data-cites="Fowl18a">Fowler (<a href="references.html#ref-Fowl18a" role="doc-biblioref">2018</a>)</span> à <a href="https://refactoring.com/catalog/replaceConditionalWithPolymorphism.html"><em>Replace Conditional with Polymorphism</em></a>.</p>
<div id="fig-GRASP_polymorphisme_ex" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="128px" preserveaspectratio="none" style="width:236px;height:128px;background:#00000000;" version="1.1" viewbox="0 0 236 128" width="236px" zoomandpan="magnify"><defs></defs><g><!--MD5=[90f66edba3ee2ef2943b92b287a7e5d6]
class Bird--><g id="elem_Bird"><rect codeline="2" fill="#F1F1F1" height="107.4844" id="Bird" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="215" x="7" y="7"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="27" x="101" y="24.9951">Bird</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="221" y1="33.2969" y2="33.2969"></line><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="83" x="13" y="50.292">type : String</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="203" x="13" y="66.5889">numberOfCoconuts : number</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="117" x="13" y="82.8857">voltage : number</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="221" y1="90.1875" y2="90.1875"></line><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="146" x="13" y="107.1826">getPlumage() : String</text></g><!--MD5=[a24bb085a0a6d9160428ac627fd55a13]
@startuml
!include normal.pumlinclude
class Bird {
    type : String
    numberOfCoconuts : number
    voltage : number

    getPlumage() : String
}
@enduml

@startuml
skinparam style strictuml
skinparam defaultFontName Helvetica,Arial,sans-serif
skinparam backgroundcolor transparent
class Bird {
    type : String
    numberOfCoconuts : number
    voltage : number

    getPlumage() : String
}
@enduml

PlantUML version 1.2022.6(Tue Jun 21 17:34:49 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;6.2: Classe «&nbsp;Bird&nbsp;» à laquelle on peut appliquer le principe GRASP Polymorphisme.</figcaption><p></p>
</figure>
</div>
<p>Appliquez le GRASP Polymorphisme pour le code suivant&nbsp;:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>get <span class="fu">plumage</span>() {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> (<span class="kw">this</span><span class="op">.</span><span class="at">type</span>) {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'EuropeanSwallow'</span><span class="op">:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="st">"average"</span><span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'AfricanSwallow'</span><span class="op">:</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> (<span class="kw">this</span><span class="op">.</span><span class="at">numberOfCoconuts</span> <span class="op">&gt;</span> <span class="dv">2</span>) <span class="op">?</span> <span class="st">"tired"</span> <span class="op">:</span> <span class="st">"average"</span><span class="op">;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="st">'NorwegianBlueParrot'</span><span class="op">:</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> (<span class="kw">this</span><span class="op">.</span><span class="at">voltage</span> <span class="op">&gt;</span> <span class="dv">100</span>) <span class="op">?</span> <span class="st">"scorched"</span> <span class="op">:</span> <span class="st">"beautiful"</span><span class="op">;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">default</span><span class="op">:</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="st">"unknown"</span><span class="op">;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note no-icon callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Voici une solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Puisque le comportement de <code>getPlumage</code> change en fonction du type de l’oiseau, il est préférable de créer une classe concrète pour chaque oiseau (<code>EuropeanSwallow</code>, <code>AfricanSwallow</code>, <code>NorwegianBlueParrot</code>) afin d’améliorer la cohésion du code. L’utilisation d’une classe abstraite <code>Bird</code> permet de garder un faible couplage malgré l’ajout de plusieurs nouvelles classes. Par le principe de polymorphisme, les oiseaux concrets sont aussi considérés comme des <code>Bird</code>. Puisque les oiseaux ne partagent pas de propriétés ou d’implémentation, il aurait aussi été possible d’utiliser une interface pour la classe <code>Bird</code>.</p>
<div id="fig-GRASP_polymorphisme_sol" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="175px" preserveaspectratio="none" style="width:577px;height:175px;background:#00000000;" version="1.1" viewbox="0 0 577 175" width="577px" zoomandpan="magnify"><defs></defs><g><!--MD5=[90f66edba3ee2ef2943b92b287a7e5d6]
class Bird--><g id="elem_Bird"><rect codeline="4" fill="#F1F1F1" height="50.5938" id="Bird" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="198" y="7"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" font-style="italic" lengthadjust="spacing" textlength="27" x="263" y="24.9951">Bird</text><line style="stroke:#181818;stroke-width:0.5;" x1="199" x2="354" y1="33.2969" y2="33.2969"></line><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" font-style="italic" lengthadjust="spacing" textlength="145" x="204" y="50.292">getPlumage() : String</text></g><!--MD5=[252b2fac9deba64ee221baeb50e730f0]
class EuropeanSwallow--><g id="elem_EuropeanSwallow"><rect codeline="8" fill="#F1F1F1" height="26.2969" id="EuropeanSwallow" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="7" y="130.5"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="121" x="10" y="148.4951">EuropeanSwallow</text></g><!--MD5=[e6822d1183b795566ebd3cb2ae899905]
class AfricanSwallow--><g id="elem_AfricanSwallow"><rect codeline="10" fill="#F1F1F1" height="50.5938" id="AfricanSwallow" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="215" x="169" y="118"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="100" x="226.5" y="135.9951">AfricanSwallow</text><line style="stroke:#181818;stroke-width:0.5;" x1="170" x2="383" y1="144.2969" y2="144.2969"></line><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="203" x="175" y="161.292">numberOfCoconuts : number</text></g><!--MD5=[7ad46a0b418f55979d0e2a500216dc07]
class NorwegianBlueParrot--><g id="elem_NorwegianBlueParrot"><rect codeline="14" fill="#F1F1F1" height="50.5938" id="NorwegianBlueParrot" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="151" x="419" y="118"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="145" x="422" y="135.9951">NorwegianBlueParrot</text><line style="stroke:#181818;stroke-width:0.5;" x1="420" x2="569" y1="144.2969" y2="144.2969"></line><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="117" x="425" y="161.292">voltage : number</text></g><!--MD5=[f7c34576cad28d8c458849f2c42b5b89]
reverse link Bird to EuropeanSwallow--><g id="link_Bird_EuropeanSwallow"><path d="M212.16,67.54 C171.64,88.99 121.77,115.37 93.31,130.43 " fill="none" id="Bird-backto-EuropeanSwallow" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="none" points="209.06,61.26,230.01,58.1,215.61,73.64,209.06,61.26" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[d2669e546e5485e8e9ccf6f84c7a4bc7]
reverse link Bird to AfricanSwallow--><g id="link_Bird_AfricanSwallow"><path d="M276.5,78.31 C276.5,91.83 276.5,106.17 276.5,117.86 " fill="none" id="Bird-backto-AfricanSwallow" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="none" points="269.5,78.23,276.5,58.23,283.5,78.23,269.5,78.23" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[4506ea7cb12e8376d1c07ab374b1b3f8]
reverse link Bird to NorwegianBlueParrot--><g id="link_Bird_NorwegianBlueParrot"><path d="M343.75,67.12 C376.62,83.56 415.46,102.98 445.48,117.99 " fill="none" id="Bird-backto-NorwegianBlueParrot" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="none" points="340.45,73.3,325.7,58.1,346.71,60.78,340.45,73.3" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[dbdb09d04a0de682dcacc769b5048b22]
@startuml
!include normal.pumlinclude
hide empty members

abstract Bird {
    {abstract} getPlumage() : String
}

class EuropeanSwallow extends Bird

class AfricanSwallow extends Bird {
    numberOfCoconuts : number
}

class NorwegianBlueParrot extends Bird {
    voltage : number
}
@enduml

@startuml
skinparam style strictuml
skinparam defaultFontName Helvetica,Arial,sans-serif
skinparam backgroundcolor transparent
hide empty members

abstract Bird {
    {abstract} getPlumage() : String
}

class EuropeanSwallow extends Bird

class AfricanSwallow extends Bird {
    numberOfCoconuts : number
}

class NorwegianBlueParrot extends Bird {
    voltage : number
}
@enduml

PlantUML version 1.2022.6(Tue Jun 21 17:34:49 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;6.3: Classes «&nbsp;Bird&nbsp;» auxquelles on a appliqué le principe GRASP Polymorphisme.</figcaption><p></p>
</figure>
</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>abstract <span class="kw">class</span> Bird {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    abstract get <span class="fu">plumage</span>()<span class="op">:</span> string</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> EuropeanSwallow <span class="kw">extends</span> Bird {</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    get <span class="fu">plumage</span>() {</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"average"</span> </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> AfricanSwallow <span class="kw">extends</span> Bird {</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_numberOfCoconuts</span><span class="op">:</span> number<span class="op">;</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">constructor</span>(<span class="dt">numberOfCoconuts</span><span class="op">:</span> number) {</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        <span class="kw">super</span>()<span class="op">;</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">_numberOfCoconuts</span> <span class="op">=</span> numberOfCoconuts<span class="op">;</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    get <span class="fu">plumage</span>() {</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (<span class="kw">this</span><span class="op">.</span><span class="at">numberOfCoconuts</span> <span class="op">&gt;</span> <span class="dv">2</span>) <span class="op">?</span> <span class="st">"tired"</span> <span class="op">:</span> <span class="st">"average"</span><span class="op">;</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    get <span class="fu">numberOfCoconuts</span>() {</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">_numberOfCoconuts</span><span class="op">;</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> NorwegianBlueParrot <span class="kw">extends</span> Bird {</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_voltage</span><span class="op">:</span> number<span class="op">;</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">constructor</span>(<span class="dt">voltage</span><span class="op">:</span> number) {</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>        <span class="kw">super</span>()<span class="op">;</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">_voltage</span> <span class="op">=</span> voltage<span class="op">;</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    get <span class="fu">plumage</span>() {</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (<span class="kw">this</span><span class="op">.</span><span class="at">voltage</span> <span class="op">&gt;</span> <span class="dv">100</span>) <span class="op">?</span> <span class="st">"scorched"</span> <span class="op">:</span> <span class="st">"beautiful"</span><span class="op">;</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    get <span class="fu">voltage</span>() {</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">_voltage</span><span class="op">;</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<!-- ::: {#exr-GRASP_GOF_cohesion}

### GRASP Cohésion

Cet exercice est inspiré d'un exemple donné dans le livre *Head First Design Patterns* de @FreemanBatesSierraRobson200410.

- Quelles classes sur la @fig-GRASP_cohesion_ex1 ont de multiples responsabilités?
- Déterminez si les classes sur la @fig-GRASP_cohesion_ex2 ont une cohésion forte ou faible.

```{.plantuml #fig-GRASP_cohesion_ex1 caption="Quelles classes ont de multiples responsabilités?"}
@startuml
!include normal.pumlinclude
class Jeu {
    login()
    inscrire()
    déplacer()
    tirer()
    rester()
}

class Joueur {
    setNom()
    setAdresse()
    setNuméroTéléphone()
    sauvegarder()
    charger()
}

class Téléphone {
    composer()
    raccrocher()
    parler()
    envoyerDonnées()
    flash()
}

class JeuCartes {
    hasNext()
    next()
    remove()
    addCard()
    removeCard()
    shuffle()
}

class Panier {
    ajouter()
    enlever()
    encaisser()
    sauvegarder()
}

class Iterator {
    hasNext()
    next()
    remove()
}

@enduml
```

```{.plantuml #fig-GRASP_cohesion_ex2 caption="Quelles classes ont une cohésion forte? Une cohésion faible?"}
@startuml
!include normal.pumlinclude
class Jeu {
    login()
    inscrire()
    déplacer()
    tirer()
    rester()
    getMeilleureScore()
    getNom()
}

class SessionPartie {
    login()
    inscrire()
}

class ActionsJoueur {
    déplacer()
    tirer()
    rester()
}

class Joueur {
    getMeilleurScore()
    getNom()
}

@enduml
```

::: -->
<div id="exr-GRASP_GOF_contrôleur" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 6.2 (GRASP Contrôleur, Fabrication Pure et Indirection) </strong></span>&nbsp;</p>
<ul>
<li>Expliquez pourquoi le principe du GRASP Contrôleur dans le cas d’un contrôleur de session (de cas d’utilisation) est une Fabrication Pure.</li>
<li>Soit un contrôleur de session <code>GestionnaireVentes</code><span style="white-space:nowrap"> ;</span> quelle est la «&nbsp;situation désespérée&nbsp;» qui est mitigée par ce <span style="white-space:nowrap">contrôleur ?</span> Astuce&nbsp;: relire la définition de Fabrication Pure.</li>
<li>Expliquez pourquoi le principe du GRASP Contrôleur dans le cas d’un contrôleur de session est un exemple du GRASP Indirection.</li>
</ul>
</div>
<div id="exr-GRASP_GOF_expert" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 6.3 (GRASP Expert en Information et Forte Cohésion) </strong></span>Appliquez le GRASP Expert en Information pour améliorer la conception des classes dans le code suivant&nbsp;:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="bu">Point</span> {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span>number<span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span>number<span class="op">;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">constructor</span>(<span class="dt">x</span><span class="op">:</span>number<span class="op">,</span> <span class="dt">y</span><span class="op">:</span>number) {</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">x</span> <span class="op">=</span> x<span class="op">;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">y</span> <span class="op">=</span> y<span class="op">;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Circle {</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">center</span><span class="op">:</span><span class="bu">Point</span><span class="op">;</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">radius</span><span class="op">:</span>number<span class="op">;</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">constructor</span>(<span class="dt">center</span><span class="op">:</span><span class="bu">Point</span><span class="op">,</span> <span class="dt">radius</span><span class="op">:</span>number) {</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">center</span> <span class="op">=</span> center<span class="op">;</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">radius</span> <span class="op">=</span> radius</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> SomeClass {</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">someMethod</span>() {</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> center <span class="op">=</span> <span class="kw">new</span> <span class="bu">Point</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">12</span>)<span class="op">;</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> c <span class="op">=</span> <span class="kw">new</span> <span class="fu">Circle</span>(center<span class="op">,</span> <span class="dv">14</span>)<span class="op">;</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> area <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">*</span> c<span class="op">.</span><span class="at">radius</span><span class="op">*</span> c<span class="op">.</span><span class="at">radius</span><span class="op">;</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> diameter <span class="op">=</span> c<span class="op">.</span><span class="at">radius</span> <span class="op">*</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> circumference <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">*</span> c<span class="op">.</span><span class="at">radius</span> <span class="op">*</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note no-icon callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Voici une solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Puisque la classe <code>Circle</code> possède les informations nécessaires (<code>radius</code>) pour calculer <code>area</code>, <code>diameter</code> et <code>circumference</code>, c’est elle qui doit contenir les méthodes pour calculer ces propriétés. Cela augmente la cohésion de la classe <code>SomeClass</code> puisqu’elle a moins de responsabilités. La complétude de la classe <code>Circle</code> est améliorée et ses méthodes peuvent être testées et réutilisées dans d’autres classes.</p>
<p>Pour être concis, la classe <code>Point</code> est omise puisqu’aucune modification n’y est apportée.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Circle {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">center</span><span class="op">:</span><span class="bu">Point</span><span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">radius</span><span class="op">:</span>number<span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">constructor</span>(<span class="dt">center</span><span class="op">:</span><span class="bu">Point</span><span class="op">,</span> <span class="dt">radius</span><span class="op">:</span>number) {</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">center</span> <span class="op">=</span> center<span class="op">;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">radius</span> <span class="op">=</span> radius</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    get <span class="fu">area</span>()<span class="op">:</span>number {</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">*</span> <span class="kw">this</span><span class="op">.</span><span class="at">radius</span> <span class="op">*</span> <span class="kw">this</span><span class="op">.</span><span class="at">radius</span><span class="op">;</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    get <span class="fu">diameter</span>()<span class="op">:</span>number {</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">radius</span> <span class="op">*</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    get <span class="fu">circumference</span>()<span class="op">:</span>number {</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">*</span> <span class="kw">this</span><span class="op">.</span><span class="at">radius</span> <span class="op">*</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> SomeClass {</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">someMethod</span>() {</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> center <span class="op">=</span> <span class="kw">new</span> <span class="bu">Point</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">12</span>)<span class="op">;</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> c <span class="op">=</span> <span class="kw">new</span> <span class="fu">Circle</span>(center<span class="op">,</span> <span class="dv">14</span>)<span class="op">;</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> area <span class="op">=</span> c<span class="op">.</span><span class="at">area</span><span class="op">;</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> diameter <span class="op">=</span> c<span class="op">.</span><span class="at">diameter</span><span class="op">;</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> circumference <span class="op">=</span> c<span class="op">.</span><span class="at">circumference</span><span class="op">;</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div id="exr-GRASP_GOF_fabrication_pure_indirection_fabrique" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 6.4 (GRASP Fabrication Pure et Indirection) </strong></span>Appliquez le GRASP Fabrication Pure au contrôleur <code>BirdManager</code> pour améliorer sa cohésion. Ajoutez une fabrique de <code>Bird</code> à qui le contrôleur pourra déléguer la responsabilité de créer les objets <code>Bird</code>. Par la suite, expliquez pourquoi la fabrique que vous avez ajoutée est un exemple des GRASP Indirection et Fabrication Pure.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> BirdManager {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">addBird</span>(<span class="dt">b</span><span class="op">:</span> {<span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">numberOfCoconuts</span><span class="op">:</span> number<span class="op">,</span> <span class="dt">voltage</span><span class="op">:</span> number}) {</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="dt">bird</span><span class="op">:</span> Bird<span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (b<span class="op">.</span><span class="at">type</span> <span class="op">==</span> <span class="st">"EuropeanSwallow"</span>) {</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>            bird <span class="op">=</span> <span class="kw">new</span> <span class="fu">EuropeanSwallow</span>()<span class="op">;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> (b<span class="op">.</span><span class="at">type</span> <span class="op">==</span> <span class="st">"AfricanSwallow"</span>) {</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>            bird <span class="op">=</span> <span class="kw">new</span> <span class="fu">AfricanSwallow</span>(b<span class="op">.</span><span class="at">numberOfCoconuts</span>)<span class="op">;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> (b<span class="op">.</span><span class="at">type</span> <span class="op">==</span> <span class="st">"NorwegianBlueParrot"</span>) {</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>            bird <span class="op">=</span> <span class="kw">new</span> <span class="fu">NorwegianBlueParrot</span>(b<span class="op">.</span><span class="at">voltage</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> {</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">"Unsupported bird."</span>)<span class="op">;</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Then, we do something with the bird...</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note no-icon callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Voici une solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>L’ajout de la fabrique <code>BirdFactory</code> permet d’améliorer la cohésion du contrôleur <code>BirdManager</code> puisque ses responsabilités sont réduites. La fabrique est un exemple du GRASP Indirection puisqu’elle élimine le couplage direct entre le contrôleur <code>BirdManager</code> et les différents types de <code>Bird</code>. Si d’autres types de <code>Bird</code> sont ajoutés à l’application, l’impact sera moins important sur le contrôleur. La fabrique est une Fabrication Pure, car elle n’existe pas dans le domaine de l’application. Elle a été inventée pour améliorer la cohésion de <code>BirdManager</code> et réduire son couplage avec les <code>Bird</code> concrets.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> BirdManager {</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">addBird</span>(<span class="dt">b</span><span class="op">:</span> {<span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">numberOfCoconuts</span><span class="op">:</span> number<span class="op">,</span> <span class="dt">voltage</span><span class="op">:</span> number}) {</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="dt">bird</span><span class="op">:</span> Bird <span class="op">=</span> BirdFactory<span class="op">.</span><span class="fu">createBird</span>(b)<span class="op">;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Then, we do something with the bird...</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> BirdFactory {</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="kw">static</span> <span class="fu">createBird</span>(<span class="dt">b</span><span class="op">:</span> {<span class="dt">type</span><span class="op">:</span> <span class="bu">String</span><span class="op">,</span> <span class="dt">numberOfCoconuts</span><span class="op">:</span> number<span class="op">,</span> </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>                             <span class="dt">voltage</span><span class="op">:</span> number}) {</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="dt">bird</span><span class="op">:</span> Bird<span class="op">;</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (b<span class="op">.</span><span class="at">type</span> <span class="op">==</span> <span class="st">"EuropeanSwallow"</span>) {</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>            bird <span class="op">=</span> <span class="kw">new</span> <span class="fu">EuropeanSwallow</span>()<span class="op">;</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> (b<span class="op">.</span><span class="at">type</span> <span class="op">==</span> <span class="st">"AfricanSwallow"</span>) {</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>            bird <span class="op">=</span> <span class="kw">new</span> <span class="fu">AfricanSwallow</span>(b<span class="op">.</span><span class="at">numberOfCoconuts</span>)<span class="op">;</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> (b<span class="op">.</span><span class="at">type</span> <span class="op">==</span> <span class="st">"NorwegianBlueParrot"</span>) {</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>            bird <span class="op">=</span> <span class="kw">new</span> <span class="fu">NorwegianBlueParrot</span>(b<span class="op">.</span><span class="at">voltage</span>)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> {</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">"Unsupported bird."</span>)<span class="op">;</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> bird<span class="op">;</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div id="exr-GRASP_GOF_expert_createur_forte_cohesion" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 6.5 (GRASP Expert en Information et Forte Cohésion) </strong></span>Appliquez le GRASP Expert en Information aux classes <code>Movie</code>, <code>Person</code> et <code>MovieManager</code> pour améliorer leur cohésion. Pour être concis, les constructeurs, les accesseurs et les mutateurs des classes <code>Movie</code> et <code>Person</code> sont omis.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Movie {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_id</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_title</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_synopsis</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_year</span><span class="op">:</span>number</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_duration</span><span class="op">:</span>number</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_genres</span><span class="op">:</span><span class="bu">String</span>[]</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_directors</span><span class="op">:</span>Person[]</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Person {</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_name</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_biography</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MovieManager {</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">getMovie</span>(<span class="bu">String</span> id) {</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> <span class="dt">movie</span><span class="op">:</span>Movie <span class="op">=</span> movies<span class="op">.</span><span class="fu">get</span>(id)<span class="op">;</span> <span class="co">// We get the movie from the map</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>        <span class="co">// We convert the movie to JSON</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> movieJSON <span class="op">=</span> {</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>            <span class="dt">id</span><span class="op">:</span> movie<span class="op">.</span><span class="at">id</span><span class="op">,</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>            <span class="dt">title</span><span class="op">:</span> movie<span class="op">.</span><span class="at">title</span><span class="op">,</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>            <span class="dt">synopsis</span><span class="op">:</span> movie<span class="op">.</span><span class="at">synopsis</span><span class="op">,</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>            <span class="dt">year</span><span class="op">:</span> movie<span class="op">.</span><span class="at">year</span><span class="op">,</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>            <span class="dt">duration</span><span class="op">:</span> movie<span class="op">.</span><span class="at">duration</span><span class="op">,</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>            <span class="dt">genres</span><span class="op">:</span> movie<span class="op">.</span><span class="at">genres</span><span class="op">,</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>            <span class="dt">directors</span><span class="op">:</span> []</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>        <span class="co">// We convert the directors to JSON and we add them to JSON representation of the movie</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (<span class="kw">var</span> <span class="dt">director</span><span class="op">:</span>Person <span class="kw">of</span> movie<span class="op">.</span><span class="at">directors</span>) {</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>            <span class="kw">var</span> directorJSON <span class="op">=</span> {</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>                <span class="dt">name</span><span class="op">:</span> director<span class="op">.</span><span class="at">name</span><span class="op">,</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>                <span class="dt">biography</span><span class="op">:</span> director<span class="op">.</span><span class="at">biography</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>            }<span class="op">;</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>            movieJSON<span class="op">.</span><span class="at">directors</span><span class="op">.</span><span class="fu">append</span>(directorJSON)<span class="op">;</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> movieJSON<span class="op">;</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note no-icon callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Voici une solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Puisque les classes <code>Movie</code> et <code>Person</code> possèdent les informations nécessaires pour se convertir en JSON, ce sont elles qui doivent posséder les méthodes pour effectuer la conversion. Cela augmente la cohésion de la classe <code>MovieManager</code> puisqu’elle a moins de responsabilités. La complétude des classes <code>Movie</code> et <code>Person</code> est améliorée et leurs méthodes peuvent être testées et réutilisées dans d’autres classes.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Movie {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_id</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_title</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_synopsis</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_year</span><span class="op">:</span>number</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_duration</span><span class="op">:</span>number</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_genres</span><span class="op">:</span><span class="bu">String</span>[]</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_directors</span><span class="op">:</span>Person[]</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">toJSON</span>() {</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> {</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>            <span class="dt">id</span><span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="at">_id</span><span class="op">,</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>            <span class="dt">title</span><span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="at">_title</span><span class="op">,</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>            <span class="dt">synopsis</span><span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="at">_synopsis</span><span class="op">,</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>            <span class="dt">year</span><span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="at">_year</span><span class="op">,</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>            <span class="dt">duration</span><span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="at">_duration</span><span class="op">,</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>            <span class="dt">genres</span><span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="at">_genres</span><span class="op">,</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>            <span class="dt">directors</span><span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="at">_directors</span> <span class="co">// The conversion to JSON will be done automatically</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Person {</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_name</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_biography</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">toJSON</span>() {</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> {</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>            <span class="dt">name</span><span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="at">_name</span><span class="op">,</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>            <span class="dt">biography</span><span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="at">_biography</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MovieManager {</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">getMovie</span>(<span class="dt">id</span><span class="op">:</span><span class="bu">String</span>) {</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> <span class="dt">movie</span><span class="op">:</span>Movie <span class="op">=</span> movies<span class="op">.</span><span class="fu">get</span>(id)<span class="op">;</span> <span class="co">// We get the movie from the map</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> movie<span class="op">.</span><span class="fu">toJSON</span>()<span class="op">;</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div id="exr-GRASP_GOF_expert_createur_forte_cohesion_2" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 6.6 (GRASP Expert en Information et Forte Cohésion) </strong></span>Appliquez le GRASP Expert en information aux classes <code>Book</code> et <code>BookManager</code> pour améliorer leur cohésion. Pour être concis, les accesseurs et les mutateurs de la classe <code>Book</code> sont omis.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Book {</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_title</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_year</span><span class="op">:</span>number</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_pages</span><span class="op">:</span>number</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_isbn</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">constructor</span>(<span class="dt">title</span><span class="op">:</span><span class="bu">String</span><span class="op">,</span> <span class="dt">year</span><span class="op">:</span>number<span class="op">,</span> <span class="dt">pages</span><span class="op">:</span>number<span class="op">,</span> <span class="dt">isbn</span><span class="op">:</span><span class="bu">String</span>) {</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">_title</span> <span class="op">=</span> title<span class="op">;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">_year</span> <span class="op">=</span> year<span class="op">;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">_pages</span> <span class="op">=</span> pages<span class="op">;</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">_isbn</span> <span class="op">=</span> isbn<span class="op">;</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> BookManager {</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">addBook</span>(<span class="dt">title</span><span class="op">:</span><span class="bu">String</span><span class="op">,</span> <span class="dt">year</span><span class="op">:</span>number<span class="op">,</span> <span class="dt">pages</span><span class="op">:</span>number<span class="op">,</span> <span class="dt">isbn</span><span class="op">:</span><span class="bu">String</span>) {</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>        title <span class="op">=</span> title<span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>        year <span class="op">=</span> <span class="pp">parseInt</span>(year)<span class="op">;</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>        pages <span class="op">=</span> <span class="pp">parseInt</span>(pages)<span class="op">;</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>        isbn <span class="op">=</span> isbn<span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (title<span class="op">.</span><span class="at">length</span> <span class="op">==</span> <span class="dv">0</span>) {</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">"The book title must not be empty."</span>)<span class="op">;</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (year <span class="op">&gt;</span> (<span class="kw">new</span> <span class="bu">Date</span>())<span class="op">.</span><span class="fu">getFullYear</span>()) {</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">"You cannot add a book that will be published in the future."</span>)<span class="op">;</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (pages <span class="op">&lt;=</span> <span class="dv">0</span>) {</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">"The book must contain at least one page."</span>)<span class="op">;</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="op">!</span>(isbn<span class="op">.</span><span class="at">length</span> <span class="op">==</span> <span class="dv">10</span> <span class="op">||</span> isbn<span class="op">.</span><span class="at">length</span> <span class="op">==</span> <span class="dv">13</span>)) {</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">"ISBN must have 10 or 13 characters."</span>)<span class="op">;</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> book <span class="op">=</span> <span class="kw">new</span> <span class="fu">Book</span>(title<span class="op">,</span> year<span class="op">,</span> pages<span class="op">,</span> isbn)<span class="op">;</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>        <span class="co">// We add the book to the map</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>        books<span class="op">.</span><span class="fu">add</span>(isbn<span class="op">,</span> book)<span class="op">;</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note no-icon callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Voici une solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Puisque la classe <code>Book</code> contient les propriétés <code>title</code>, <code>year</code>, <code>pages</code> et <code>isbn</code>, c’est sa responsabilité de déterminer ce qui est une information erronée et d’effectuer les validations. Cela augmente la cohésion de la classe <code>BookManager</code> puisqu’elle a moins de responsabilités. De plus, si on doit à modifier les informations d’une livre existant, il ne sera pas nécessaire de dupliquer les validations. La complétude de la classe <code>Book</code> est améliorée et les validations peuvent être testées à l’aide de tests unitaires.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Book {</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_title</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_year</span><span class="op">:</span>number</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_pages</span><span class="op">:</span>number</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">_isbn</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">constructor</span>(<span class="dt">title</span><span class="op">:</span><span class="bu">String</span><span class="op">,</span> <span class="dt">year</span><span class="op">:</span>number<span class="op">,</span> <span class="dt">pages</span><span class="op">:</span>number<span class="op">,</span> <span class="dt">isbn</span><span class="op">:</span><span class="bu">String</span>) {</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">_title</span> <span class="op">=</span> title<span class="op">;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">_year</span> <span class="op">=</span> year<span class="op">;</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">_pages</span> <span class="op">=</span> pages<span class="op">;</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">_isbn</span> <span class="op">=</span> isbn<span class="op">;</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> get <span class="fu">title</span>() {</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">_title</span><span class="op">;</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> set <span class="fu">title</span>(<span class="dt">title</span><span class="op">:</span><span class="bu">String</span>) {</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>        title <span class="op">=</span> title<span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (title<span class="op">.</span><span class="at">length</span> <span class="op">==</span> <span class="dv">0</span>) {</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">"The book title must not be empty."</span>)<span class="op">;</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">_title</span> <span class="op">=</span> title<span class="op">;</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> get <span class="fu">year</span>() {</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">_year</span><span class="op">;</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> set <span class="fu">year</span>(<span class="dt">year</span><span class="op">:</span>number) {</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>        year <span class="op">=</span> <span class="pp">parseInt</span>(year)<span class="op">;</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (year <span class="op">&gt;</span> (<span class="kw">new</span> <span class="bu">Date</span>())<span class="op">.</span><span class="fu">getFullYear</span>()) {</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">"You cannot add a book that will be published in the future."</span>)<span class="op">;</span></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">_year</span> <span class="op">=</span> year<span class="op">;</span></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> get <span class="fu">pages</span>() {</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">_pages</span><span class="op">;</span></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> set <span class="fu">pages</span>(<span class="dt">pages</span><span class="op">:</span>number) {</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>        pages <span class="op">=</span> <span class="pp">parseInt</span>(pages)<span class="op">;</span></span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (pages <span class="op">&lt;=</span> <span class="dv">0</span>) {</span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">"The book must contain at least one page."</span>)<span class="op">;</span></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">_pages</span> <span class="op">=</span> pages<span class="op">;</span></span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> get <span class="fu">isbn</span>() {</span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">_isbn</span><span class="op">;</span></span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> set <span class="fu">isbn</span>(<span class="dt">isbn</span><span class="op">:</span><span class="bu">String</span>) {</span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a>        isbn <span class="op">=</span> isbn<span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="op">!</span>(isbn<span class="op">.</span><span class="at">length</span> <span class="op">==</span> <span class="dv">10</span> <span class="op">||</span> isbn<span class="op">.</span><span class="at">length</span> <span class="op">==</span> <span class="dv">13</span>)) {</span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">"ISBN must have 10 or 13 characters."</span>)<span class="op">;</span></span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">_isbn</span> <span class="op">=</span> isbn<span class="op">;</span></span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-70"><a href="#cb10-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-71"><a href="#cb10-71" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> BookManager {</span>
<span id="cb10-72"><a href="#cb10-72" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">addBook</span>(<span class="dt">title</span><span class="op">:</span><span class="bu">String</span><span class="op">,</span> <span class="dt">year</span><span class="op">:</span>number<span class="op">,</span> <span class="dt">pages</span><span class="op">:</span>number<span class="op">,</span> <span class="dt">isbn</span><span class="op">:</span><span class="bu">String</span>) {</span>
<span id="cb10-73"><a href="#cb10-73" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> book <span class="op">=</span> <span class="kw">new</span> <span class="fu">Book</span>(title<span class="op">,</span> year<span class="op">,</span> pages<span class="op">,</span> isbn)<span class="op">;</span></span>
<span id="cb10-74"><a href="#cb10-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-75"><a href="#cb10-75" aria-hidden="true" tabindex="-1"></a>        <span class="co">// We add the book to the map</span></span>
<span id="cb10-76"><a href="#cb10-76" aria-hidden="true" tabindex="-1"></a>        books<span class="op">.</span><span class="fu">add</span>(isbn<span class="op">,</span> book)<span class="op">;</span></span>
<span id="cb10-77"><a href="#cb10-77" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-78"><a href="#cb10-78" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div id="exr-GRASP_GOF_polymorphisme_createur_fabrication_pure_indirection" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 6.7 (GRASP Polymorphisme, Créateur, Fabrication Pure et Indirection) </strong></span>Appliquez les GRASP Polymorphisme et Créateur à la classe <code>PartManager</code> pour améliorer sa cohésion et réduire son couplage. Créez une interface <code>PartParser</code> qui contient les méthodes pertinentes aux parsers et qui sera implémentée par ces derniers. Ajoutez un <code>PartParser</code> concret pour chaque type de fichier traitée par la méthode <code>parsePart</code>. Ajoutez une fabrique de <code>PartParser</code> à qui <code>PartManager</code> pourra déléguer la responsabilité de créer les objets <code>PartParser</code>. Par la suite, expliquez pourquoi la fabrique que vous avez ajoutée est un exemple des GRASP Indirection et Fabrication Pure.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Part {</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">name</span><span class="op">:</span>string</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">description</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">constructor</span>(<span class="dt">name</span><span class="op">:</span>string<span class="op">,</span> <span class="dt">description</span><span class="op">:</span><span class="bu">String</span>) {</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">name</span> <span class="op">=</span> name<span class="op">;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">description</span> <span class="op">=</span> description<span class="op">;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> PartManager {</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">parsePart</span>(<span class="dt">fileType</span><span class="op">:</span>string<span class="op">,</span> <span class="dt">content</span><span class="op">:</span>string) {</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> <span class="dt">part</span><span class="op">:</span>Part<span class="op">;</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (fileType <span class="op">==</span> <span class="st">"csv"</span>) {</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>            <span class="kw">const</span> partsInfo <span class="op">=</span> content<span class="op">.</span><span class="fu">split</span>(<span class="st">","</span>)<span class="op">;</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>            part <span class="op">=</span> <span class="kw">new</span> <span class="fu">Part</span>(partsInfo[<span class="dv">0</span>]<span class="op">,</span> partsInfo[<span class="dv">1</span>])<span class="op">;</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> (fileType <span class="op">==</span> <span class="st">"json"</span>) {</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>            <span class="kw">const</span> part <span class="op">=</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">parse</span>(content)<span class="op">;</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>            part <span class="op">=</span> <span class="kw">new</span> <span class="fu">Part</span>(part<span class="op">.</span><span class="at">name</span><span class="op">,</span> part<span class="op">.</span><span class="at">description</span>)<span class="op">;</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> (fileType <span class="op">==</span> <span class="st">"xml"</span>) {</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>            <span class="kw">var</span> parser <span class="op">=</span> <span class="kw">new</span> <span class="fu">DOMParser</span>()<span class="op">;</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>            <span class="kw">var</span> xml <span class="op">=</span> parser<span class="op">.</span><span class="fu">parseFromString</span>(content<span class="op">,</span> <span class="st">"application/xml"</span>)<span class="op">;</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>            <span class="kw">var</span> name <span class="op">=</span> xml<span class="op">.</span><span class="fu">getElementsByTagName</span>(<span class="st">"name"</span>)[<span class="dv">0</span>]<span class="op">.</span><span class="at">childNodes</span>[<span class="dv">0</span>]<span class="op">.</span><span class="at">nodeValue</span> <span class="op">||</span> <span class="st">""</span><span class="op">;</span> <span class="co">// Return an empty name if it is not in the XML tree</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>            <span class="kw">var</span> description <span class="op">=</span> xml<span class="op">.</span><span class="fu">getElementsByTagName</span>(<span class="st">"description"</span>)[<span class="dv">0</span>]<span class="op">.</span><span class="at">childNodes</span>[<span class="dv">0</span>]<span class="op">.</span><span class="at">nodeValue</span> <span class="op">||</span> <span class="st">""</span><span class="op">;</span> <span class="co">// Return an empty description if it is not in the XML tree</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>            part <span class="op">=</span> <span class="kw">new</span> <span class="fu">Part</span>(name<span class="op">,</span> description)<span class="op">;</span></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> {</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">"Unsupported file type"</span>)<span class="op">;</span></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Then, we do something with the part...</span></span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note no-icon callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Voici une solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>La création de plusieurs <code>PartParser</code> permet d’améliorer la cohésion de la classe <code>PartManager</code> puisqu’elle a moins de responsabilités. Les <code>PartParser</code> peuvent être plus facilement réutilisés et testés à l’aide de tests unitaires. La création de l’interface <code>PartParser</code> permet de créer un API stable pour les <code>PartParser</code>, ce qui réduit le couplage entre <code>PartManager</code> et les différents types de <code>PartParser</code>. La fabrique est un exemple du GRASP Indirection puisqu’elle élimine le couplage direct entre la classe <code>PartManager</code> et les différents types de <code>PartParser</code>. Si d’autres types de <code>PartParser</code> sont ajoutés à l’application, l’impact sera moins important sur le contrôleur. La fabrique est une Fabrication Pure, car elle n’existe pas dans le domaine de l’application. Elle a été inventée pour améliorer la cohésion de <code>PartManager</code> et réduire son couplage avec les <code>PartParser</code> concrets.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Part {</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">name</span><span class="op">:</span>string</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">description</span><span class="op">:</span><span class="bu">String</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">constructor</span>(<span class="dt">name</span><span class="op">:</span>string<span class="op">,</span> <span class="dt">description</span><span class="op">:</span><span class="bu">String</span>) {</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">name</span> <span class="op">=</span> name<span class="op">;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">description</span> <span class="op">=</span> description<span class="op">;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> PartManager {</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">parsePart</span>(<span class="dt">fileType</span><span class="op">:</span>string<span class="op">,</span> <span class="dt">content</span><span class="op">:</span>string) {</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> <span class="dt">part</span><span class="op">:</span>Part <span class="op">=</span> ParserFactory<span class="op">.</span><span class="fu">createParser</span>(fileType<span class="op">,</span> content)<span class="op">.</span><span class="fu">parse</span>()<span class="op">;</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Then, we do something with the part...</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> PartParser {</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">parse</span>()<span class="op">:</span>Part</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> CSVPartParser <span class="kw">implements</span> PartParser {</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">parse</span>()<span class="op">:</span>Part {</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> partsInfo <span class="op">=</span> content<span class="op">.</span><span class="fu">split</span>(<span class="st">","</span>)<span class="op">;</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">new</span> <span class="fu">Part</span>(partsInfo[<span class="dv">0</span>]<span class="op">,</span> partsInfo[<span class="dv">1</span>])<span class="op">;</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> JSONPartParser <span class="kw">implements</span> PartParser {</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">parse</span>()<span class="op">:</span>Part {</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> part <span class="op">=</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">parse</span>(content)<span class="op">;</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">new</span> <span class="fu">Part</span>(part<span class="op">.</span><span class="at">name</span><span class="op">,</span> part<span class="op">.</span><span class="at">description</span>)<span class="op">;</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> XMLPartParser <span class="kw">implements</span> PartParser {</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">parse</span>()<span class="op">:</span>Part {</span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> parser <span class="op">=</span> <span class="kw">new</span> <span class="fu">DOMParser</span>()<span class="op">;</span></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> xml <span class="op">=</span> parser<span class="op">.</span><span class="fu">parseFromString</span>(content<span class="op">,</span> <span class="st">"application/xml"</span>)<span class="op">;</span></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> name <span class="op">=</span> xml<span class="op">.</span><span class="fu">getElementsByTagName</span>(<span class="st">"name"</span>)[<span class="dv">0</span>]<span class="op">.</span><span class="at">childNodes</span>[<span class="dv">0</span>]<span class="op">.</span><span class="at">nodeValue</span> <span class="op">||</span> <span class="st">""</span><span class="op">;</span> <span class="co">// Return an empty name if it is not in the XML tree</span></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> description <span class="op">=</span> xml<span class="op">.</span><span class="fu">getElementsByTagName</span>(<span class="st">"description"</span>)[<span class="dv">0</span>]<span class="op">.</span><span class="at">childNodes</span>[<span class="dv">0</span>]<span class="op">.</span><span class="at">nodeValue</span> <span class="op">||</span> <span class="st">""</span><span class="op">;</span> <span class="co">// Return an empty description if it is not in the XML tree</span></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">new</span> <span class="fu">Part</span>(name<span class="op">,</span> description)<span class="op">;</span></span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> ParserFactory {</span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="kw">static</span> <span class="fu">createParser</span>(<span class="dt">fileType</span><span class="op">:</span>string<span class="op">,</span> <span class="dt">content</span><span class="op">:</span>string) {</span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (fileType <span class="op">==</span> <span class="st">"csv"</span>) {</span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="kw">new</span> <span class="fu">CSVPartParser</span>(content)<span class="op">;</span></span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> (fileType <span class="op">==</span> <span class="st">"json"</span>) {</span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="kw">new</span> <span class="fu">JSONPartParser</span>(content)<span class="op">;</span></span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb12-59"><a href="#cb12-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> (fileType <span class="op">==</span> <span class="st">"xml"</span>) {</span>
<span id="cb12-60"><a href="#cb12-60" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="kw">new</span> <span class="fu">XMLPartParser</span>(content)<span class="op">;</span></span>
<span id="cb12-61"><a href="#cb12-61" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb12-62"><a href="#cb12-62" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> {</span>
<span id="cb12-63"><a href="#cb12-63" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">"Unsupported file type"</span>)<span class="op">;</span></span>
<span id="cb12-64"><a href="#cb12-64" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb12-65"><a href="#cb12-65" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb12-66"><a href="#cb12-66" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div id="exr-GRASP_GOF_protection_variations_fabrication_pure" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 6.8 (GRASP Protection des Variations et Fabrication Pure) </strong></span>Le code suivant permet de gérer les emprunts de livres pour une bibliothèque. À chaque emprunt un événement est ajouté dans le calendrier Google de l’emprunteur pour lui rappeler de retourner le livre à temps. Pour ce faire, l’API de Google Calendar est utilisé. Appliquez les GRASP Protection des Variations et Fabrication Pure pour améliorer la cohésion de <code>ReservationManager</code>. Pour être concis, la gestion des réservations dans l’application est omise.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> ReservationManager {</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">addReservation</span>(<span class="bu">String</span> memberId<span class="op">,</span> <span class="bu">String</span> bookId<span class="op">,</span> <span class="bu">String</span> bookCopyId<span class="op">,</span> <span class="bu">Date</span> expiration) {</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> member <span class="op">=</span> members<span class="op">.</span><span class="fu">get</span>(memberId)<span class="op">;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> book <span class="op">=</span> books<span class="op">.</span><span class="fu">get</span>(bookId)<span class="op">;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">// We assume that we create the reservation for the member some way...</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Then we add an event to the Google Calendar of the member to remind them to return their book</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> dateAsString <span class="op">=</span> expiration<span class="op">.</span><span class="fu">toLocaleDateString</span>(<span class="st">"fr-CA"</span><span class="op">,</span> {<span class="dt">year</span><span class="op">:</span> <span class="st">"numeric"</span><span class="op">,</span> <span class="dt">month</span><span class="op">:</span> <span class="st">"2-digit"</span><span class="op">,</span> <span class="dt">day</span><span class="op">:</span> <span class="st">"2-digit"</span>})<span class="op">;</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>        <span class="co">// References</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>        <span class="co">// https://developers.google.com/calendar/api/v3/reference?hl=fr</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>        <span class="co">// https://dev.to/pedrohase/create-google-calender-events-using-the-google-api-and-service-accounts-in-nodejs-22m8</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> <span class="bu">event</span> <span class="op">=</span> {</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">"summary"</span><span class="op">:</span> <span class="vs">`Your reservation for </span><span class="sc">${</span>book<span class="op">.</span><span class="fu">getTitle</span>()<span class="sc">}</span><span class="vs"> is expired`</span><span class="op">,</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>            <span class="st">"location"</span><span class="op">:</span> <span class="st">"475 Boul. de Maisonneuve E, Montréal, QC H2L 5C4"</span><span class="op">,</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">"description"</span><span class="op">:</span> <span class="st">"You must return your book today to avoid late fees."</span><span class="op">,</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"start"</span><span class="op">:</span> {</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>                <span class="st">"date"</span><span class="op">:</span> dateAsString<span class="op">,</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>                <span class="st">"timeZone"</span><span class="op">:</span> <span class="st">"America/Toronto"</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>            <span class="st">"end"</span><span class="op">:</span> {</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>                <span class="st">"date"</span><span class="op">:</span> dateAsString<span class="op">,</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>                <span class="st">"timeZone"</span><span class="op">:</span> <span class="st">"America/Toronto"</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>            <span class="st">"reminders"</span><span class="op">:</span> {</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>                <span class="st">"useDefault"</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>                <span class="st">"overrides"</span><span class="op">:</span> [</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>                    <span class="co">// Send a reminder the day before by email and push notification</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>                    {<span class="st">"method"</span><span class="op">:</span> <span class="st">"email"</span><span class="op">,</span> <span class="st">"minutes"</span><span class="op">:</span> <span class="dv">24</span> <span class="op">*</span> <span class="dv">60</span>}<span class="op">,</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>                    {<span class="st">"method"</span><span class="op">:</span> <span class="st">"popup"</span><span class="op">,</span> <span class="st">"minutes"</span><span class="op">:</span> <span class="dv">24</span> <span class="op">*</span> <span class="dv">60</span>}</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>                ]</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Create a client that we can use to communicate with Google </span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> client <span class="op">=</span> <span class="kw">new</span> <span class="fu">JWT</span>({</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>            <span class="dt">email</span><span class="op">:</span> member<span class="op">.</span><span class="at">email</span><span class="op">,</span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>            <span class="dt">key</span><span class="op">:</span> member<span class="op">.</span><span class="at">googlePrivateKey</span><span class="op">,</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>            <span class="dt">scopes</span><span class="op">:</span> [</span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>                <span class="st">"https://www.googleapis.com/auth/calendar"</span><span class="op">,</span></span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>                <span class="st">"https://www.googleapis.com/auth/calendar.events"</span><span class="op">,</span></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>            ]<span class="op">,</span></span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> calendar <span class="op">=</span> google<span class="op">.</span><span class="fu">calendar</span>({ <span class="dt">version</span><span class="op">:</span> <span class="st">"v3"</span> })<span class="op">;</span></span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a>        <span class="co">// We make a request to Google Calendar API.</span></span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> calendar<span class="op">.</span><span class="at">events</span><span class="op">.</span><span class="fu">insert</span>({</span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>            <span class="dt">calendarId</span><span class="op">:</span> <span class="st">"primary"</span><span class="op">,</span></span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a>            <span class="dt">auth</span><span class="op">:</span> client<span class="op">,</span></span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a>            <span class="dt">requestBody</span><span class="op">:</span> <span class="bu">event</span><span class="op">,</span></span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb13-55"><a href="#cb13-55" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note no-icon callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Voici une solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>La classe <code>GoogleCalendar</code> est une Fabrication Pure, car elle n’existe pas dans le domaine de l’application. Elle a été ajoutée pour améliorer la cohésion de <code>ReservationManager</code>. Avec la classe <code>GoogleCalendar</code>, il est aussi plus facile de réutiliser la fonctionnalité dans une autre partie de l’application. Selon le GRASP Protection des Variations, la classe <code>GoogleCalendar</code> permet aussi de réduire le couplage entre <code>ReservationManager</code> et l’interface API de Google. Si Google apporte des changements à son interface API, l’impact sur la classe <code>ReservationManager</code> sera moins important.</p>
<p><strong>Pour améliorer la cohésion de la classe <code>ReservationManager</code>, est-il possible de donner la responsabilité de créer l’objet <code>event</code> à une autre <span style="white-space:nowrap">classe ?</span></strong></p>
<p>Il serait possible de créer une classe <code>Event</code> qui représente un événement de l’interface API de Google. La cohésion de la classe <code>ReservationManager</code> ne serait pas significativement améliorée, puisqu’elle conserverait toujours la responsabilité de fournir les paramètres de l’événement. L’ajout de la classe <code>Event</code> permettrait de valider l’utilisation des bonnes propriétés et des bons types lors de la compilation du code. Toutefois, puisque les événements de l’interface API de Google sont complexes, l’ajout de la classe <code>Event</code> demanderait beaucoup de temps de développement et de tests. La pertinence de la classe <code>Event</code> dépend du contexte de développement dans lequel vous vous trouvez.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> ReservationManager {</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">addReservation</span>(<span class="bu">String</span> memberId<span class="op">,</span> <span class="bu">String</span> bookId<span class="op">,</span> <span class="bu">String</span> bookCopyId<span class="op">,</span> <span class="bu">Date</span> expiration) {</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> member <span class="op">=</span> members<span class="op">.</span><span class="fu">get</span>(memberId)<span class="op">;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> book <span class="op">=</span> books<span class="op">.</span><span class="fu">get</span>(bookId)<span class="op">;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">// We assume that we create the reservation for the member some way...</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Then we add an event to the Google Calendar of the member to remind them to return their book</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> dateAsString <span class="op">=</span> expiration<span class="op">.</span><span class="fu">toLocaleDateString</span>(<span class="st">"fr-CA"</span><span class="op">,</span> {<span class="dt">year</span><span class="op">:</span> <span class="st">"numeric"</span><span class="op">,</span> <span class="dt">month</span><span class="op">:</span> <span class="st">"2-digit"</span><span class="op">,</span> <span class="dt">day</span><span class="op">:</span> <span class="st">"2-digit"</span>})<span class="op">;</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>        GoogleCalendar<span class="op">.</span><span class="fu">addEvent</span>({</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>            <span class="st">"summary"</span><span class="op">:</span> <span class="vs">`Your reservation for </span><span class="sc">${</span>book<span class="op">.</span><span class="fu">getTitle</span>()<span class="sc">}</span><span class="vs"> is expired`</span><span class="op">,</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">"location"</span><span class="op">:</span> <span class="st">"475 Boul. de Maisonneuve E, Montréal, QC H2L 5C4"</span><span class="op">,</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>            <span class="st">"description"</span><span class="op">:</span> <span class="st">"You must return your book today to avoid late fees."</span><span class="op">,</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">"start"</span><span class="op">:</span> {</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>                <span class="st">"date"</span><span class="op">:</span> dateAsString<span class="op">,</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>                <span class="st">"timeZone"</span><span class="op">:</span> <span class="st">"America/Toronto"</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"end"</span><span class="op">:</span> {</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>                <span class="st">"date"</span><span class="op">:</span> dateAsString<span class="op">,</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>                <span class="st">"timeZone"</span><span class="op">:</span> <span class="st">"America/Toronto"</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>            <span class="st">"reminders"</span><span class="op">:</span> {</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>                <span class="st">"useDefault"</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>                <span class="st">"overrides"</span><span class="op">:</span> [</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>                    <span class="co">// Send a reminder the day before by email and push notification</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>                    {<span class="st">"method"</span><span class="op">:</span> <span class="st">"email"</span><span class="op">,</span> <span class="st">"minutes"</span><span class="op">:</span> <span class="dv">24</span> <span class="op">*</span> <span class="dv">60</span>}<span class="op">,</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>                    {<span class="st">"method"</span><span class="op">:</span> <span class="st">"popup"</span><span class="op">,</span> <span class="st">"minutes"</span><span class="op">:</span> <span class="dv">24</span> <span class="op">*</span> <span class="dv">60</span>}</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>                ]</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span> member<span class="op">.</span><span class="at">email</span><span class="op">,</span> member<span class="op">.</span><span class="at">googlePrivateKey</span>)<span class="op">;</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> GoogleCalendar {</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>    <span class="co">/*</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="co">     * References</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a><span class="co">     * https://developers.google.com/calendar/api/v3/reference?hl=fr</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a><span class="co">     * https://dev.to/pedrohase/create-google-calender-events-using-the-google-api-and-service-accounts-in-nodejs-22m8</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a><span class="co">     */</span></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="kw">static</span> <span class="fu">addEvent</span>(<span class="bu">event</span><span class="op">,</span> email<span class="op">,</span> privateKey) {</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Create a client that we can use to communicate with Google </span></span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> client <span class="op">=</span> <span class="kw">new</span> <span class="fu">JWT</span>({</span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>            <span class="dt">email</span><span class="op">:</span> email<span class="op">,</span></span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>            <span class="dt">key</span><span class="op">:</span> privateKey<span class="op">,</span></span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>            <span class="dt">scopes</span><span class="op">:</span> [</span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a>                <span class="st">"https://www.googleapis.com/auth/calendar"</span><span class="op">,</span></span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a>                <span class="st">"https://www.googleapis.com/auth/calendar.events"</span><span class="op">,</span></span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>            ]<span class="op">,</span></span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> calendar <span class="op">=</span> google<span class="op">.</span><span class="fu">calendar</span>({ <span class="dt">version</span><span class="op">:</span> <span class="st">"v3"</span> })<span class="op">;</span></span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a>        <span class="co">// We make a request to Google Calendar API.</span></span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> calendar<span class="op">.</span><span class="at">events</span><span class="op">.</span><span class="fu">insert</span>({</span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a>            <span class="dt">calendarId</span><span class="op">:</span> <span class="st">"primary"</span><span class="op">,</span></span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a>            <span class="dt">auth</span><span class="op">:</span> client<span class="op">,</span></span>
<span id="cb14-59"><a href="#cb14-59" aria-hidden="true" tabindex="-1"></a>            <span class="dt">requestBody</span><span class="op">:</span> <span class="bu">event</span><span class="op">,</span></span>
<span id="cb14-60"><a href="#cb14-60" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb14-61"><a href="#cb14-61" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb14-62"><a href="#cb14-62" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography" style="display: none">
<div id="ref-Ford2009" class="csl-entry" role="doc-biblioentry">
Ford, N. (2009, 24 février). Evolutionary architecture and emergent design: <span>Investigating</span> architecture and design. [{CT}316]. Repéré à <a href="https://web.archive.org/web/20161029141308/http://www.ibm.com/developerworks/library/j-eaed1/">https://web.archive.org/web/20161029141308/http://www.ibm.com/developerworks/library/j-eaed1/</a>
</div>
<div id="ref-Fowl18a" class="csl-entry" role="doc-biblioentry">
Fowler, M. (2018). <em>Refactoring: Improving the Design of Existing Code</em> (2ᵉ éd.). Boston&nbsp;: Addison-Wesley Professional.
</div>
<div id="ref-craig_uml_2005" class="csl-entry" role="doc-biblioentry">
Larman, C. (2005). <em><span>UML</span> 2 et les design patterns</em> (3ᵉ éd.). Paris&nbsp;: Village Mondial.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./DSS.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Diagrammes de séquence système (DSS)</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./DetteTechnique.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Dette technique</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>