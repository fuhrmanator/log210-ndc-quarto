<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.146">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Analyse et conception de logiciels - 14&nbsp; Décortiquer les patterns GoF avec GRASP</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Fiabilité.html" rel="next">
<link href="./Outils-UML.html" rel="prev">
<link href="./images/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer"
  }
}</script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet" data-external="1">
<style type="text/css">
@font-face {
font-family: 'xkcd Script';
src: url('web-resources/xkcd-font/xkcd-script.ttf') format('truetype');
}
</style>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Décortiquer les patterns GoF avec GRASP</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title"><span id="sec-GRASP-GoF" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Décortiquer les patterns GoF avec GRASP</span></span></h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Analyse et conception de logiciels</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/fuhrmanator/log210-ndc-quarto/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Download" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-download"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="./Analyse-et-conception-de-logiciels.pdf">
            <i class="bi bi-bi-file-pdf pe-1"></i>
          Download PDF
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="./Analyse-et-conception-de-logiciels.epub">
            <i class="bi bi-bi-journal pe-1"></i>
          Download ePub
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">index.html</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AnalyseConception.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Analyse et conception de logiciels</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Besoins.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Besoins (exigences)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./CasUtilisation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Cas d’utilisation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MDD.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Modèle du domaine (MDD, modèle conceptuel)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DSS.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Diagrammes de séquence système (DSS)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./GRASP.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Principes GRASP</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DetteTechnique.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Dette technique</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Contrats.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Contrats d’opération</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./RDCU.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Réalisations de cas d’utilisation (RDCU)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TDD.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Développement piloté par les tests</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Réusinage.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Réusinage (Refactorisation)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TravailEquipe.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Développement de logiciels en équipe</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Outils-UML.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Outils pour la modélisation UML</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./GRASP-GoF.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Décortiquer les patterns GoF avec GRASP</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Fiabilité.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Fiabilité</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DiagrammesActivites.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Diagrammes d’activités</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DiagrammesEtats.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Diagrammes d’états</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ConceptionPackages.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Conception de packages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DiagrammesDeploiement.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Diagrammes de déploiement et de composants</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Laboratoires.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Laboratoires</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">Bibliographie</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Annexes</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Annexe_Cas_utilisation_Réserver_livre.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Cas d’utilisation – Réserver un livre de la bibliothèque</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Annexe_Cas_utilisation_Traiter_vente.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Cas d’utilisation – Traiter une vente</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Annexe_Cas_utilisation_Ouvrir_caisse.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Cas d’utilisation – Ouvrir la caisse</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table des matières</h2>
   
  <ul>
  <li><a href="#exemple-avec-adaptateur" id="toc-exemple-avec-adaptateur" class="nav-link active" data-scroll-target="#exemple-avec-adaptateur"><span class="toc-section-number">14.1</span>  Exemple avec Adaptateur</a></li>
  <li><a href="#imaginer-le-code-sans-le-pattern-gof" id="toc-imaginer-le-code-sans-le-pattern-gof" class="nav-link" data-scroll-target="#imaginer-le-code-sans-le-pattern-gof"><span class="toc-section-number">14.2</span>  Imaginer le code sans le pattern GoF</a></li>
  <li><a href="#sec-GRASP_Adaptateur" id="toc-sec-GRASP_Adaptateur" class="nav-link" data-scroll-target="#sec-GRASP_Adaptateur"><span class="toc-section-number">14.3</span>  Identifier les GRASP dans les GoF</a>
  <ul class="collapse">
  <li><a href="#polymorphisme" id="toc-polymorphisme" class="nav-link" data-scroll-target="#polymorphisme"><span class="toc-section-number">14.3.1</span>  Polymorphisme</a></li>
  <li><a href="#fabrication-pure" id="toc-fabrication-pure" class="nav-link" data-scroll-target="#fabrication-pure"><span class="toc-section-number">14.3.2</span>  Fabrication Pure</a></li>
  <li><a href="#indirection" id="toc-indirection" class="nav-link" data-scroll-target="#indirection"><span class="toc-section-number">14.3.3</span>  Indirection</a></li>
  <li><a href="#protection-des-variations" id="toc-protection-des-variations" class="nav-link" data-scroll-target="#protection-des-variations"><span class="toc-section-number">14.3.4</span>  Protection des variations</a></li>
  </ul></li>
  <li><a href="#grasp-et-réusinage" id="toc-grasp-et-réusinage" class="nav-link" data-scroll-target="#grasp-et-réusinage"><span class="toc-section-number">14.4</span>  GRASP et réusinage</a></li>
  <li><a href="#exercices" id="toc-exercices" class="nav-link" data-scroll-target="#exercices"><span class="toc-section-number">14.5</span>  Exercices</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/fuhrmanator/log210-ndc-quarto/issues/new" class="toc-action">Signaler un problème</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>Craig Larman a proposé les GRASP pour faciliter la compréhension des forces essentielles de la conception orientée objet. Dans ce chapitre, on examine la présence des GRASP dans les patterns GoF. C’est une excellente façon de mieux comprendre et les principes GRASP et les patterns GoF.</p>
<section id="exemple-avec-adaptateur" class="level2" data-number="14.1">
<h2 data-number="14.1" class="anchored" data-anchor-id="exemple-avec-adaptateur"><span class="header-section-number">14.1</span> Exemple avec Adaptateur</h2>
<p>Le pattern Adaptateur a été proposé par <span class="citation" data-cites="GoF1994">Gamma, Helm, Johnson, et Vlissides (<a href="references.html#ref-GoF1994" role="doc-biblioref">1994</a>)</span>, et sa structure est illustrée sur la <a href="#fig-AdapterGoF">figure&nbsp;<span>14.1</span></a>. La structure de base peut être trompeuse, car elle ne montre qu’une seule classe <code>Adaptee</code> qui représente l’interface API (externe) que l’on ne peut modifier. En réalité, ce pattern est plus intéressant lorsqu’on considère <em>plusieurs</em> cas de classe <code>Adaptee</code>, chacune avec une interface API différente.</p>
<div class="callout callout-style-default callout-note callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Qu’est-ce qu’un calculateur de <span style="white-space:nowrap">taxes ?</span>
</div>
</div>
<div class="callout-body-container callout-body">
<p>On rappelle ici le contexte du problème auquel a été appliqué le pattern Adaptateur, soit le problème de calcul des taxes. Le logiciel NextGen POS doit calculer les taxes pour les ventes, mais la compagnie vise un marché large (par exemple, les États-unis et le Canada). Puisque le calcul des taxes peut être différent selon l’État et même la ville (par exemple <a href="https://www.cdtfa.ca.gov/taxes-and-fees/rates.aspx">les villes de la Californie</a>), la compagnie qui développe NextGen POS ne veut pas maintenir toute cette information dans une partie du logiciel, car la maintenance ne sera pas rentable. La solution est de permettre au système d’exploiter un module externe qui est un «&nbsp;calculateur de taxes&nbsp;», car ce genre de module existe (voir <a href="https://taxcloud.com/home">TaxCloud</a>). Puisque la clientèle du NextGen POS pourrait utiliser des calculateurs différents (selon sa région ou son budget), il faut constater que l’interface API de chaque calculateur sera <em>différente</em> (faute de norme sur les interfaces API de calculateurs de taxe) et <em>immuable</em> (on ne peut pas s’attendre à ce que le fournisseur de chaque calculateur change son interface API ou fournisse le code source). Alors, le pattern Adaptateur est proposé comme solution à ce problème. <span class="citation" data-cites="craig_uml_2005">Larman (<a href="references.html#ref-craig_uml_2005" role="doc-biblioref">2005</a>)</span> propose aussi que les modules externes soient considérés pour gérer l’inventaire et pour suivre la comptabilité, car ces fonctionnalités sont complexes et difficiles à faire correctement. Encore, si NextGen POS supporte plusieurs choix (fournisseurs) de ces modules externes, il y aura ensuite le problème des interfaces API différentes et immuables. Le pattern Adaptateur sera encore utile dans ce contexte.</p>
</div>
</div>
<p>Le chapitre A26/F23&nbsp;<i class="fa-solid fa-book" aria-label="book"></i>&nbsp;présente l’exemple du pattern Adaptateur pour les calculateurs de taxes (figure F23.1/A26.1&nbsp;<i class="fa-solid fa-book" aria-label="book"></i>). On remarque que cette figure dans le livre de Larman ne montre pas les classes adaptées, mais nous les avons ajoutées dans la <a href="#fig-Fig23_1">figure&nbsp;<span>14.2</span></a>. Nous faisons une hypothèse sur les noms des méthodes pour l’interface API des classes adaptées, car cette information n’est pas spécifiée. En plus, nous n’avons pas spécifié les arguments (c’est «&nbsp;?&nbsp;»), car les détails ne sont pas connus.</p>
<p>Un autre point à mentionner dans le problème de calcul des taxes est que ça dépend de l’article. Selon l’État ou la province, certains articles sont sujets à des taxes et d’autres non. A priori, le calculateur de taxes est l’expert pour décider combien de taxes pour chaque article, mais le calculateur n’est pas l’expert des articles. C’est pour cela que l’Adaptateur a accès à l’objet Vente qui agrège des LigneArticles. L’Adaptateur de calculateur de taxes pourra ainsi accéder à chaque article de la vente pour déterminer les taxes. L’objet Vente a une visibilité de paramètre.</p>
<p>Dans le contexte du projet NextGen POS, Larman propose l’utilisation de ce pattern pour plusieurs dimensions où des services externes ont plusieurs possibilités (l’inventaire, la comptabilité, etc.).</p>
<div id="fig-AdapterGoF" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="304px" preserveaspectratio="none" style="width:419px;height:304px;background:#00000000;" version="1.1" viewbox="0 0 419 304" width="419px" zoomandpan="magnify"><defs></defs><g><!--MD5=[fc07866a383d07d405a25512054a0e5c]
class Target--><g id="elem_Target"><rect codeline="3" fill="#F1F1F1" height="50.5938" id="Target" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="87.5" y="7"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" font-style="italic" lengthadjust="spacing" textlength="45" x="105" y="24.9951">Target</text><line style="stroke:#181818;stroke-width:0.5;" x1="88.5" x2="166.5" y1="33.2969" y2="33.2969"></line><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" font-style="italic" lengthadjust="spacing" textlength="68" x="93.5" y="50.292">Request()</text></g><!--MD5=[f38a85e47f7d4f812523dd9b6d7d2c16]
class Adapter--><g id="elem_Adapter"><rect codeline="6" fill="#F1F1F1" height="50.5938" id="Adapter" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="87" y="119"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="54" x="100.5" y="136.9951">Adapter</text><line style="stroke:#181818;stroke-width:0.5;" x1="88" x2="167" y1="145.2969" y2="145.2969"></line><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="69" x="93" y="162.292">Request()</text></g><path d="M203,127 L203,135.5664 L162,157.4453 L203,143.5664 L203,152.1328 A0,0 0 0 0 203,152.1328 L412,152.1328 A0,0 0 0 0 412,152.1328 L412,137 L402,127 L203,127 A0,0 0 0 0 203,127 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"></path><path d="M402,127 L402,137 L412,137 L402,127 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"></path><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="13" lengthadjust="spacing" textlength="188" x="209" y="144.0669">adaptee -&gt; SpecificRequest()</text><!--MD5=[7393b79429f23cd61e6e6a493d3a2b14]
class Adaptee--><g id="elem_Adaptee"><rect codeline="12" fill="#F1F1F1" height="50.5938" id="Adaptee" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="60.5" y="247"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="58" x="98.5" y="264.9951">Adaptee</text><line style="stroke:#181818;stroke-width:0.5;" x1="61.5" x2="193.5" y1="273.2969" y2="273.2969"></line><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="122" x="66.5" y="290.292">SpecificRequest()</text></g><!--MD5=[ed6624c6556d5e7b1bd23032162d20b7]
class Client--><g id="elem_Client"><rect codeline="18" fill="#F1F1F1" height="26.2969" id="Client" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45" x="7" y="19.5"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="39" x="10" y="37.4951">Client</text></g><!--MD5=[e8afce381d6978114aa9e217ec9a4ba2]
reverse link Target to Adapter--><g id="link_Target_Adapter"><path d="M127.5,78.61 C127.5,92.39 127.5,107.02 127.5,118.9 " fill="none" id="Target-backto-Adapter" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"></path><polygon fill="none" points="120.5,78.19,127.5,58.19,134.5,78.19,120.5,78.19" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[ac16be24c016d0cc1b5b2bfc6dfbddbe]
link Adapter to Adaptee--><g id="link_Adapter_Adaptee"><path codeline="16" d="M127.5,170.09 C127.5,190.65 127.5,220.02 127.5,241.87 " fill="none" id="Adapter-to-Adaptee" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="127.5,246.97,131.5,237.97,127.5,241.97,123.5,237.97,127.5,246.97" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="13" lengthadjust="spacing" textlength="53" x="128.5" y="213.0669">adaptee</text></g><!--MD5=[431c3f1848dccc83292155c400886313]
link Client to Target--><g id="link_Client_Target"><path codeline="20" d="M52.09,32.5 C62.12,32.5 72.15,32.5 82.19,32.5 " fill="none" id="Client-to-Target" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="87.44,32.5,78.44,28.5,82.44,32.5,78.44,36.5,87.44,32.5" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[cecd720015220321f5e4072c7893ba66]
@startuml
!include normal.pumlinclude
hide empty members
interface Target {
  {abstract} Request()
}
class Adapter implements Target {
  Request()
}
note right of Adapter::Request
adaptee -> SpecificRequest()
end note
class Adaptee {
  SpecificRequest()
}

Adaptee <-u- Adapter : adaptee

class Client {
}
Client -r-> Target
@enduml

@startuml
skinparam style strictuml
skinparam defaultFontName Helvetica,Arial,sans-serif
skinparam backgroundcolor transparent
hide empty members
interface Target {
  {abstract} Request()
}
class Adapter implements Target {
  Request()
}
note right of Adapter::Request
adaptee -> SpecificRequest()
end note
class Adaptee {
  SpecificRequest()
}

Adaptee <-u- Adapter : adaptee

class Client {
}
Client -r-> Target
@enduml

PlantUML version 1.2022.6(Tue Jun 21 17:34:49 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;14.1: Le diagramme de classes du pattern Adaptateur <span class="citation" data-cites="GoF1994">(<a href="references.html#ref-GoF1994" role="doc-biblioref">Gamma et coll., 1994</a>)</span>. <a href="https://www.plantuml.com/plantuml/uml/POvDQiDG38JtEeMMBSGN2AKG2gMhBjfUG7wM7P7tuqXo8GJVlQ-faxfq8uGqtypOGV98IWdDJv7hL0a-fGXs-tJSqnJzkMH_fSJuml6JNG9jTYeKDqRP6cELVWMr50w3bYbteSIYw5fLzSNPOIyT8wVHJvWujQm6afsrfy3uGJgmunaGpzJMFXHynZS-Jcn-TmypX4XckEjeh0nA6YEdQcjhTAtFnHbLXhrZwQ_SThj8W2u7nkOHtqSEqalufJbt-Ct_2ULBn7_n370LF3HJSwkunIK35fkdABLmTPbXMHkjyJ_zlm00">(PlantUML)</a></figcaption><p></p>
</figure>
</div>
<div id="fig-Fig23_1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="324px" preserveaspectratio="none" style="width:617px;height:324px;background:#00000000;" version="1.1" viewbox="0 0 617 324" width="617px" zoomandpan="magnify"><defs></defs><g><!--MD5=[e9ac33031c6558390ce847f6c943aa64]
class IAdaptateurCalculTaxes--><g id="elem_IAdaptateurCalculTaxes"><rect codeline="3" fill="#F1F1F1" height="72.5625" id="IAdaptateurCalculTaxes" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="284" x="166" y="7"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="12" font-style="italic" lengthadjust="spacing" textlength="78" x="269" y="23.1387">«&nbsp;interface&nbsp;»</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" font-style="italic" lengthadjust="spacing" textlength="163" x="226.5" y="38.9639">IAdaptateurCalculTaxes</text><line style="stroke:#181818;stroke-width:0.5;" x1="167" x2="449" y1="47.2656" y2="47.2656"></line><line style="stroke:#181818;stroke-width:0.5;" x1="167" x2="449" y1="55.2656" y2="55.2656"></line><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="272" x="172" y="72.2607">getTaxes( Vente ) : Liste de LigneTaxes</text></g><!--MD5=[259ef957471479b339753950fd3c07cc]
class AdaptateurTaxMaster--><g id="elem_AdaptateurTaxMaster"><rect codeline="4" fill="#F1F1F1" height="58.5938" id="AdaptateurTaxMaster" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="284" x="7" y="140"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="147" x="75.5" y="157.9951">AdaptateurTaxMaster</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="290" y1="166.2969" y2="166.2969"></line><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="290" y1="174.2969" y2="174.2969"></line><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="272" x="13" y="191.292">getTaxes( Vente ) : Liste de LigneTaxes</text></g><!--MD5=[2f65cc8178d63a4c206c61a91c971d9f]
class AdaptateurGoodAsGoldTaxPro--><g id="elem_AdaptateurGoodAsGoldTaxPro"><rect codeline="5" fill="#F1F1F1" height="58.5938" id="AdaptateurGoodAsGoldTaxPro" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="284" x="326" y="140"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="210" x="363" y="157.9951">AdaptateurGoodAsGoldTaxPro</text><line style="stroke:#181818;stroke-width:0.5;" x1="327" x2="609" y1="166.2969" y2="166.2969"></line><line style="stroke:#181818;stroke-width:0.5;" x1="327" x2="609" y1="174.2969" y2="174.2969"></line><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="272" x="332" y="191.292">getTaxes( Vente ) : Liste de LigneTaxes</text></g><!--MD5=[428d04a0a0cf7e0291933b47368ba5b6]
class TaxMaster--><g id="elem_TaxMaster"><rect codeline="11" fill="#F1F1F1" height="58.5938" id="TaxMaster" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143" x="77.5" y="259"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="71" x="113.5" y="276.9951">TaxMaster</text><line style="stroke:#181818;stroke-width:0.5;" x1="78.5" x2="219.5" y1="285.2969" y2="285.2969"></line><line style="stroke:#181818;stroke-width:0.5;" x1="78.5" x2="219.5" y1="293.2969" y2="293.2969"></line><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="131" x="83.5" y="310.292">calculateTaxes ( ? )</text></g><!--MD5=[f2be1f1ea7d007d23534c62cda1e423e]
class GoodAsGoldTaxPro--><g id="elem_GoodAsGoldTaxPro"><rect codeline="14" fill="#F1F1F1" height="58.5938" id="GoodAsGoldTaxPro" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="144" x="396" y="259"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="134" x="401" y="276.9951">GoodAsGoldTaxPro</text><line style="stroke:#181818;stroke-width:0.5;" x1="397" x2="539" y1="285.2969" y2="285.2969"></line><line style="stroke:#181818;stroke-width:0.5;" x1="397" x2="539" y1="293.2969" y2="293.2969"></line><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="132" x="402" y="310.292">computeTaxes ( ? )</text></g><!--MD5=[13ccf0c40bd42f442ae563e3c9e7062a]
reverse link IAdaptateurCalculTaxes to AdaptateurTaxMaster--><g id="link_IAdaptateurCalculTaxes_AdaptateurTaxMaster"><path d="M246.46,92.49 C225.96,108.48 203.77,125.79 185.75,139.84 " fill="none" id="IAdaptateurCalculTaxes-backto-AdaptateurTaxMaster" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"></path><polygon fill="none" points="242.36,86.81,262.44,80.03,250.97,97.85,242.36,86.81" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[a266237048187ca5572f0eec7e11ecdd]
reverse link IAdaptateurCalculTaxes to AdaptateurGoodAsGoldTaxPro--><g id="link_IAdaptateurCalculTaxes_AdaptateurGoodAsGoldTaxPro"><path d="M369.92,92.49 C390.56,108.48 412.89,125.79 431.02,139.84 " fill="none" id="IAdaptateurCalculTaxes-backto-AdaptateurGoodAsGoldTaxPro" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"></path><polygon fill="none" points="365.37,97.82,353.85,80.03,373.95,86.75,365.37,97.82" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[e3eb33769c9c28d139d38d7a954f387d]
link AdaptateurTaxMaster to TaxMaster--><g id="link_AdaptateurTaxMaster_TaxMaster"><path codeline="18" d="M149,199.12 C149,215.55 149,236.28 149,253.53 " fill="none" id="AdaptateurTaxMaster-to-TaxMaster" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="149,258.77,153,249.77,149,253.77,145,249.77,149,258.77" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[de95c18130638644529383c8760b5bd2]
link AdaptateurGoodAsGoldTaxPro to GoodAsGoldTaxPro--><g id="link_AdaptateurGoodAsGoldTaxPro_GoodAsGoldTaxPro"><path codeline="19" d="M468,199.12 C468,215.55 468,236.28 468,253.53 " fill="none" id="AdaptateurGoodAsGoldTaxPro-to-GoodAsGoldTaxPro" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="468,258.77,472,249.77,468,253.77,464,249.77,468,258.77" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[48ee6e87342f013a441e8998dfd3ae10]
@startuml
!include normal.pumlinclude

interface       IAdaptateurCalculTaxes << interface >>
class           AdaptateurTaxMaster implements IAdaptateurCalculTaxes
class           AdaptateurGoodAsGoldTaxPro implements IAdaptateurCalculTaxes

IAdaptateurCalculTaxes : getTaxes( Vente ) : Liste de LigneTaxes
AdaptateurTaxMaster : getTaxes( Vente ) : Liste de LigneTaxes
AdaptateurGoodAsGoldTaxPro : getTaxes( Vente ) : Liste de LigneTaxes

class TaxMaster {
    calculateTaxes ( ? )
}
class GoodAsGoldTaxPro {
    computeTaxes ( ? )
}

AdaptateurTaxMaster -d-> TaxMaster
AdaptateurGoodAsGoldTaxPro -d-> GoodAsGoldTaxPro
@enduml

@startuml
skinparam style strictuml
skinparam defaultFontName Helvetica,Arial,sans-serif
skinparam backgroundcolor transparent

interface       IAdaptateurCalculTaxes << interface >>
class           AdaptateurTaxMaster implements IAdaptateurCalculTaxes
class           AdaptateurGoodAsGoldTaxPro implements IAdaptateurCalculTaxes

IAdaptateurCalculTaxes : getTaxes( Vente ) : Liste de LigneTaxes
AdaptateurTaxMaster : getTaxes( Vente ) : Liste de LigneTaxes
AdaptateurGoodAsGoldTaxPro : getTaxes( Vente ) : Liste de LigneTaxes

class TaxMaster {
    calculateTaxes ( ? )
}
class GoodAsGoldTaxPro {
    computeTaxes ( ? )
}

AdaptateurTaxMaster -d-> TaxMaster
AdaptateurGoodAsGoldTaxPro -d-> GoodAsGoldTaxPro
@enduml

PlantUML version 1.2022.6(Tue Jun 21 17:34:49 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;14.2: Le pattern Adaptateur appliqué pour les services externes de calculateurs de taxes. Chaque service externe a une interface API distincte et immuable. Les adaptateurs concrets permettent de normaliser l’accès à ces interfaces API à travers une interface <code>IAdaptateurCalculTaxes</code>. <a href="https://www.plantuml.com/plantuml/uml/dL3RIiD047tVhvZ75feVa189WbLGyK5y7pUJi7GlOMTN5F5V-YtzCiSaDD8RnNbObfbpcJEyDhx3Y0uuVLgIDngTihEATvEQ6imstGQVdj0Ht95zfsGqBgfeq2uOFHTCqJH_I6-ersqCsTSws10XHK79Y7nIolX4iK5DCDHzLMENC56EDsXrjY_uGGpBvNQpWsutPQcqHMQOQk89un5Pi61SPyc93v_GFQEo2g6kU1LiBSZd62uGKoUMluAMKl-TmQi84Cobzs1aHxceV5fFWyAn4FzX7on_kSXuaid_I_qUHlTvH7o8D8DhcAll4NnWDtA2w_8-usZ6eYxAoV9Sa1wvt_q1">(PlantUML)</a></figcaption><p></p>
</figure>
</div>
</section>
<section id="imaginer-le-code-sans-le-pattern-gof" class="level2" data-number="14.2">
<h2 data-number="14.2" class="anchored" data-anchor-id="imaginer-le-code-sans-le-pattern-gof"><span class="header-section-number">14.2</span> Imaginer le code sans le pattern GoF</h2>
<p>Chaque principe GRASP est défini avec un énoncé d’un problème de conception et avec une solution pour le résoudre. Pourtant, beaucoup d’exemples dans le livre de <span class="citation" data-cites="craig_uml_2005">Larman (<a href="references.html#ref-craig_uml_2005" role="doc-biblioref">2005</a>)</span> sont des patterns GoF déjà appliqués (et le problème initial n’est pas toujours expliqué en détail).</p>
<p>Alors, pour mieux comprendre l’application des patterns GoF, on doit imaginer la situation du logiciel <em>avant</em> l’application du pattern. Dans l’exemple avec l’adaptateur pour les calculateurs de taxes, imaginez le code si l’on n’avait aucun adaptateur. À la place d’une méthode <code>getTaxes()</code> envoyée par la classe Vente à l’adaptateur, on aurait l’obligation de faire un branchement selon le type de calculateur de taxes externe utilisé actuellement (si l’on veut supporter plusieurs calculateurs). Donc, dans la classe Vente, il y aurait du code comme ceci&nbsp;:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* calculateurTaxes est le nom du calculateur utilisé actuellement */</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>calculateurTaxes <span class="op">==</span> <span class="st">"GoodAsGoldTaxPro"</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* série d'instructions pour interagir avec GoodAsGoldTaxPro */</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>calculateurTaxes <span class="op">==</span> <span class="st">"TaxMaster"</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* série d'instructions pour interagir avec TaxMaster */</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="co">/* ainsi de suite pour chacun des calculateurs */</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ... */</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Pour supporter un nouveau calculateur de taxes, il faudrait coder une nouvelle branche dans le bloc de <code>if/then</code>. Ça nuirait à la clarté du code, et la méthode qui contient tout ce code deviendrait de plus en plus longue. Même si l’on faisait une méthode pour encapsuler le code de chaque branche, ça ferait toujours augmenter les responsabilités de la classe Vente. Elle est responsable de connaître tous les détails (l’interface API distincte et immuable) de chaque calculateur de taxes externe, puisqu’elle communique directement (il y a du couplage) avec ces derniers. Lorsqu’une classe prend plus de responsabilités, ça porte atteinte à sa cohésion.</p>
<p>Le pattern Adaptateur comprend les principes GRASP Faible Couplage, Forte Cohésion, Polymorphisme, Indirection, Fabrication Pure et Protection des variations. La <a href="#fig-Fig23_3">figure&nbsp;<span>14.3</span></a> démontre la relation entre ces principes dans le cas d’Adaptateur.</p>
<div id="fig-Fig23_3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="501px" preserveaspectratio="none" style="width:699px;height:501px;background:#00000000;" version="1.1" viewbox="0 0 699 501" width="699px" zoomandpan="magnify"><defs></defs><g><!--MD5=[cdb8f274676d302e15f2718dcbeb2456]
cluster   --><g id="cluster_  "><rect height="133" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;fill:none;" width="126" x="7" y="94"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="0" font-weight="bold" lengthadjust="spacing" textlength="0" x="70" y="96">&nbsp;&nbsp;</text></g><!--MD5=[cbc0be2e139dd15b0007deace4fc5f27]
cluster  --><g id="cluster_ "><rect height="307" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;fill:none;" width="532" x="161" y="7"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="0" font-weight="bold" lengthadjust="spacing" textlength="0" x="427" y="9">&nbsp;</text></g><!--MD5=[a46ee5ce0ceb0380cf446a08a056dce4]
class A--><g id="elem_A"><rect codeline="9" fill="#F1F1F1" height="26.2969" id="A" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94" x="23" y="110"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="88" x="26" y="127.9951">Adaptateur</text></g><g id="elem_GoF"><path d="M28,171 L28,211.2656 L112,211.2656 L112,181 L102,171 L28,171 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"></path><path d="M102,171 L102,181 L112,181 L102,171 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"></path><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="13" font-weight="bold" lengthadjust="spacing" textlength="63" x="34" y="188.0669">Patterns</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="13" font-weight="bold" lengthadjust="spacing" textlength="29" x="34" y="203.1997">GoF</text></g><!--MD5=[4f19e5d0132c047105df0483a56a7e39]
class PV--><g id="elem_PV"><rect codeline="17" fill="#F1F1F1" height="58.8906" id="PV" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="555" y="93.5"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="101" x="565.5" y="111.4951">Mécanisme de</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="116" x="558" y="127.792">Protection des</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="77" x="577.5" y="144.0889">variations</text></g><!--MD5=[db86d5681f21248c03a41d24eb6c23ce]
class FCoup--><g id="elem_FCoup"><rect codeline="18" fill="#F1F1F1" height="42.5938" id="FCoup" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131" x="364" y="101.5"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="101" x="379" y="119.4951">Mécanisme de</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="125" x="367" y="135.792">Faible Couplage</text></g><!--MD5=[0f98626034d43abc10fe425c5bea3e9e]
class FCoh--><g id="elem_FCoh"><rect codeline="19" fill="#F1F1F1" height="42.5938" id="FCoh" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="366" y="23.5"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="101" x="379" y="41.4951">Mécanisme de</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="121" x="369" y="57.792">Forte Cohésion</text></g><!--MD5=[bb3cc8e7b7b7c695de19422991e26ff4]
class Poly--><g id="elem_Poly"><rect codeline="20" fill="#F1F1F1" height="42.5938" id="Poly" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="177" y="101.5"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="81" x="200" y="119.4951">Exemple de</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="121" x="180" y="135.792">Polymorphisme</text></g><!--MD5=[df4642e209062963ecd05122e6e81a7f]
class Indir--><g id="elem_Indir"><rect codeline="21" fill="#F1F1F1" height="42.5938" id="Indir" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="189.5" y="179.5"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="79" x="201" y="197.4951">Mécanisme</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="12" x="192.5" y="213.792">d'</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="84" x="204.5" y="213.792">Indirection</text></g><!--MD5=[f595eebca6eefe0b4dc0741e31316c3a]
class FP--><g id="elem_FP"><rect codeline="22" fill="#F1F1F1" height="42.5938" id="FP" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="194" y="23.5"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="87" x="197" y="41.4951">Fabrication</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="37" x="222" y="57.792">Pure</text></g><g id="elem_GRASP"><path d="M196,258 L196,298.2656 L285,298.2656 L285,268 L275,258 L196,258 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"></path><path d="M275,258 L275,268 L285,268 L275,258 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"></path><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="13" font-weight="bold" lengthadjust="spacing" textlength="68" x="202" y="275.0669">Principes</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="13" font-weight="bold" lengthadjust="spacing" textlength="50" x="202" y="290.1997">GRASP</text></g><!--MD5=[ec43ceb2cff68fa3625ed754dce1808c]
link FCoup to PV--><g id="link_FCoup_PV"><path codeline="29" d="M495.03,123 C507.78,123 521.31,123 534.52,123 " fill="none" id="FCoup-to-PV" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="none" points="534.84,116,554.84,123,534.84,130,534.84,116" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[d2f32a1b063ebd9adea780284bc8d93b]
link Poly to FCoup--><g id="link_Poly_FCoup"><path codeline="31" d="M304.03,123 C316.64,123 330.1,123 343.33,123 " fill="none" id="Poly-to-FCoup" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="none" points="343.79,116,363.79,123,343.79,130,343.79,116" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[f05daaa717f7d7547cb3a3dcbd2ecd58]
link Indir to FCoup--><g id="link_Indir_FCoup"><path codeline="32" d="M291.61,180.1 C312.13,171.54 336.23,161.48 358.45,152.22 " fill="none" id="Indir-to-FCoup" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="none" points="355.79,145.74,376.95,144.5,361.18,158.66,355.79,145.74" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[3f1f9dc501510f6f541a08723f7b53d9]
link FP to FCoup--><g id="link_FP_FCoup"><path codeline="33" d="M287.25,64.08 C308.47,72.93 334.18,83.66 357.82,93.52 " fill="none" id="FP-to-FCoup" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="none" points="360.86,87.2,376.63,101.36,355.47,100.12,360.86,87.2" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[a6b44e80a2c0e476a75ffcc192c52b68]
link FP to FCoh--><g id="link_FP_FCoh"><path codeline="34" d="M287.25,45 C304.91,45 325.69,45 345.79,45 " fill="none" id="FP-to-FCoh" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="none" points="345.93,38,365.93,45,345.93,52,345.93,38" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[9bf684cd35a5359a0b79cfce7b8219a9]
link A to Indir--><g id="link_A_Indir"><path codeline="36" d="M105.97,136.06 C117.42,140.84 130.01,146.65 141,153 C146.77,156.34 147.26,158.61 153,162 C158.76,165.4 164.87,168.71 171.08,171.86 " fill="none" id="A-to-Indir" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="none" points="174.16,165.58,189.15,180.55,168.09,178.19,174.16,165.58" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[2a9daeffd9b67b3bcad58fabb9c722eb]
link A to FP--><g id="link_A_FP"><path codeline="37" d="M98.27,109.86 C114.19,102.23 134.69,92.48 153,84 C160.19,80.67 167.74,77.21 175.25,73.79 " fill="none" id="A-to-FP" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="none" points="172.52,67.34,193.63,65.47,178.3,80.1,172.52,67.34" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--MD5=[d6df06fe0dbf0f890af55fc537475fa0]
link A to Poly--><g id="link_A_Poly"><path codeline="38" d="M117.04,123 C129.27,123 142.87,123 156.42,123 " fill="none" id="A-to-Poly" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="none" points="156.77,116,176.77,123,156.77,130,156.77,116" style="stroke:#181818;stroke-width:1.0;"></polygon></g><rect height="158.6719" rx="7.5" ry="7.5" style="stroke:#000000;stroke-width:1.0;fill:none;" width="552" x="66.5" y="327"></rect><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="540" x="72.5" y="345.9951">Faible Couplage est une façon d'obtenir une protection à un point de variation.</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="4" x="72.5" y="362.292">&nbsp;</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="532" x="72.5" y="378.5889">Polymorphisme est une façon d'obtenir une protection à un point de variation</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="148" x="72.5" y="394.8857">et un faible couplage.</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="4" x="72.5" y="411.1826">&nbsp;</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="402" x="72.5" y="427.4795">Une Indirection est une façon d'obtenir un faible couplage.</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="4" x="72.5" y="443.7764">&nbsp;</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="515" x="72.5" y="460.0732">Le pattern Adaptateur est une sorte d'Indirection et de Fabrication Pure qui</text><text fill="#000000" font-family="Helvetica,Arial,sans-serif" font-size="14" lengthadjust="spacing" textlength="270" x="72.5" y="476.3701">applique le principe de Polymorphisme.</text><!--MD5=[e25a1acbb91d1052b778688dd7ec6f24]
@startuml Adaptateur_GRASP
!include normal.pumlinclude
hide empty members
left to right direction
skinparam rectangle {
    fontsize 0
}

rectangle "  " {
    class "**Adaptateur**" as A
note as GoF
**Patterns**
**GoF**
end note
}

rectangle " " {
    class "Mécanisme de\n**Protection des**\n**variations**" as PV
    class "Mécanisme de\n**Faible Couplage**" as FCoup
    class "Mécanisme de\n**Forte Cohésion**" as FCoh
    class "Exemple de\n**Polymorphisme**" as Poly
    class "Mécanisme\nd'**Indirection**" as Indir
    class "**Fabrication**\n**Pure**" as FP
    note as GRASP
    **Principes**
    **GRASP**
    end note
}

FCoup -down-|> PV

Poly -down-|> FCoup
Indir -down-|> FCoup
FP -down-|> FCoup
FP -down-|> FCoh

A -down-|> Indir
A -down-|> FP
A -down-|> Poly

legend
Faible Couplage est une façon d'obtenir une protection à un point de variation.

Polymorphisme est une façon d'obtenir une protection à un point de variation
et un faible couplage.

Une Indirection est une façon d'obtenir un faible couplage.

Le pattern Adaptateur est une sorte d'Indirection et de Fabrication Pure qui 
applique le principe de Polymorphisme.
end legend

@enduml

@startuml Adaptateur_GRASP
skinparam style strictuml
skinparam defaultFontName Helvetica,Arial,sans-serif
skinparam backgroundcolor transparent
hide empty members
left to right direction
skinparam rectangle {
    fontsize 0
}

rectangle "  " {
    class "**Adaptateur**" as A
note as GoF
**Patterns**
**GoF**
end note
}

rectangle " " {
    class "Mécanisme de\n**Protection des**\n**variations**" as PV
    class "Mécanisme de\n**Faible Couplage**" as FCoup
    class "Mécanisme de\n**Forte Cohésion**" as FCoh
    class "Exemple de\n**Polymorphisme**" as Poly
    class "Mécanisme\nd'**Indirection**" as Indir
    class "**Fabrication**\n**Pure**" as FP
    note as GRASP
    **Principes**
    **GRASP**
    end note
}

FCoup -down-|> PV

Poly -down-|> FCoup
Indir -down-|> FCoup
FP -down-|> FCoup
FP -down-|> FCoh

A -down-|> Indir
A -down-|> FP
A -down-|> Poly

legend
Faible Couplage est une façon d'obtenir une protection à un point de variation.

Polymorphisme est une façon d'obtenir une protection à un point de variation
et un faible couplage.

Une Indirection est une façon d'obtenir un faible couplage.

Le pattern Adaptateur est une sorte d'Indirection et de Fabrication Pure qui 
applique le principe de Polymorphisme.
end legend

@enduml

PlantUML version 1.2022.6(Tue Jun 21 17:34:49 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;14.3: Adaptateur et principes GRASP (figure F23.3/A26.3 <i class="fa-solid fa-book" aria-label="book"></i>). <a href="https://www.plantuml.com/plantuml/uml/fLFDZjCm4BxxAKQzL8gsAvu0AK84a1PKWU2qbqaoIQnrRA_jB9IVT-66zZdwOeoTaAJLgXmsgfBwytmpdxyP-pkfBJhimOU38duxMOMXLyBFEpKrEAXG61q-O4_mbjG31LdXLUuagYkFskyyETciI2LMTwqpWwuheuo3u3YAjqW7qScQW7eR3j1JNvBpGb4J81Xmikq2rD9H5QJHguGHGTsonXy2-6bOZfVV2Lw8Nq8iknlWtnXIAVGUDbcMrsW31XfSbcq0FUH2cq3ntnjJY2pROmZajCyoNZ34Nz8rnA3px6V9tnyVAzJIioyrtMfEvPYKn3F02IFsW6nKXFnKV__bOeu2PSd5Nfd1Acnf8XLnVPbdN8YqxlZekTh2wzQqrz_OUpNhDUhG6sUxcEUVFCQUBdIhwssMlTDpXoP6GavDBx3aMS8nA5KQt7oKVOgTc_0n_pGYqJ-fAscZTHEITgVLkYl93zZLvglU_NmPFHLH-8ACXYLfvs2n_m_I2P4lm7Yy5S07MAsINpp3BSiJPyq3yW46JT3WyKySYgqf0scM546xJClnDoDWZTHy0GZccRaUZpNtwDa91KK-qvFEQjB9PJupVzNQIuMUODzmyV4QmNBVvXm-ZMQzFScVTAtc1EA8mFqWGQ2rIjuF12gUQHo967rYnNMwfPFlVm40">(PlantUML)</a></figcaption><p></p>
</figure>
</div>
<p>On peut donc voir le pattern Adaptateur comme <em>une spécialisation</em> de plusieurs principes GRASP&nbsp;:</p>
<ul>
<li>Polymorphisme</li>
<li>Indirection</li>
<li>Fabrication Pure</li>
<li>Faible Couplage</li>
<li>Forte Cohésion</li>
<li>Protection des variations</li>
</ul>
<p>Avec cette identification de principes GRASP dans le pattern Adaptateur, êtes-vous en mesure d’expliquer en détail avec ce contexte concret comment Adaptateur est relié à ces <span style="white-space:nowrap">principes ?</span></p>
</section>
<section id="sec-GRASP_Adaptateur" class="level2" data-number="14.3">
<h2 data-number="14.3" class="anchored" data-anchor-id="sec-GRASP_Adaptateur"><span class="header-section-number">14.3</span> Identifier les GRASP dans les GoF</h2>
<p>Pour identifier les principes GRASP dans un pattern GoF comme Adaptateur, on rappelle la définition de chaque principe GRASP et l’on essaie d’imaginer le problème qui pourrait exister éventuellement. Ensuite, on explique comment le principe (et le pattern GoF) résout le problème.</p>
<p>Consultez la <a href="#fig-Fig23_1">figure&nbsp;<span>14.2</span></a> du pattern Adaptateur pour les sections suivantes.</p>
<section id="polymorphisme" class="level3" data-number="14.3.1">
<h3 data-number="14.3.1" class="anchored" data-anchor-id="polymorphisme"><span class="header-section-number">14.3.1</span> Polymorphisme</h3>
<p>Selon <span class="citation" data-cites="craig_uml_2005">Larman (<a href="references.html#ref-craig_uml_2005" role="doc-biblioref">2005</a>)</span>&nbsp;:</p>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Problème&nbsp;:</strong> Qui est responsable quand le comportement varie selon le <span style="white-space:nowrap">type ?</span><br>
<strong>Solution&nbsp;:</strong> Lorsqu’un comportement varie selon le type (classe), affectez la responsabilité de ce comportement – avec des opérations polymorphes – aux types selon lesquels le comportement varie.</p>
</div>
</div>
</div>
<p>Le «&nbsp;comportement qui varie&nbsp;» est la manière d’adapter les méthodes utilisées par le calculateur de taxes choisi à la méthode <code>getTaxes()</code>. Alors, cette «&nbsp;responsabilité&nbsp;» est affectée au type interface <code>IAdaptateurCalculTaxes</code> (et à ses implémentations) dans l’opération polymorphe <code>getTaxes()</code>. Cet aspect du pattern est illustré sur la <a href="#fig-AdaptateurPolymorphismeNextGen">figure&nbsp;<span>14.4</span></a>.</p>
<div id="fig-AdaptateurPolymorphismeNextGen" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/AdaptateurCalcTaxesPolymorphism.drawio.svg" class="img-fluid figure-img" style="width:60.0%"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;14.4: Le mécanisme de Polymorphisme dans le pattern Adaptateur appliqué au problème de calculateurs de taxes. <code>getTaxes(...)</code> est un appel polymorphe. Selon la configuration du système (l’objet auquel <code>IAdaptateurCalculTaxes</code> fait référence), le comportement sera différent.</figcaption><p></p>
</figure>
</div>
</section>
<section id="fabrication-pure" class="level3" data-number="14.3.2">
<h3 data-number="14.3.2" class="anchored" data-anchor-id="fabrication-pure"><span class="header-section-number">14.3.2</span> Fabrication Pure</h3>
<p>Selon <span class="citation" data-cites="craig_uml_2005">Larman (<a href="references.html#ref-craig_uml_2005" role="doc-biblioref">2005</a>)</span>&nbsp;:</p>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Problème&nbsp;:</strong> En cas de situation désespérée, que faire quand vous ne voulez pas transgresser les principes de faible couplage et de forte <span style="white-space:nowrap">cohésion ?</span><br>
<strong>Solution&nbsp;:</strong> Affectez un ensemble très cohésif de responsabilités à une classe «&nbsp;comportementale&nbsp;» artificielle qui ne représente pas un concept du domaine – une entité fabriquée pour augmenter la cohésion, diminuer le couplage et faciliter la réutilisation.</p>
</div>
</div>
</div>
<p>La Fabrication Pure est la classe «&nbsp;comportementale et artificielle&nbsp;» qui est la hiérarchie <code>IAdaptateurCalculTaxes</code> (comprenant chaque adaptateur concret). Elle est comportementale puisqu’elle ne fait qu’adapter des appels. Elle est artificielle puisqu’elle ne représente pas un élément dans le modèle du domaine.</p>
<p>L’ensemble des adaptateurs concrets ont des «&nbsp;responsabilités cohésives&nbsp;» qui sont la manière d’adapter la méthode <code>getTaxes()</code> aux méthodes (immuables) des calculateurs de taxes externes. Elles ne font que ça. La cohésion est augmentée aussi dans la classe Vente, qui n’a plus la responsabilité de s’adapter aux calculateurs de taxes externes. C’est le travail qui a été donné aux adaptateurs concrets.</p>
<p>Le couplage est diminué, car la classe Vente n’est plus couplée directement aux calculateurs de taxes externes. La réutilisation des calculateurs est facilitée, car la classe Vente ne doit plus être modifiée si l’on veut utiliser un autre calculateur externe. Il suffit de créer un adaptateur pour ce dernier.</p>
</section>
<section id="indirection" class="level3" data-number="14.3.3">
<h3 data-number="14.3.3" class="anchored" data-anchor-id="indirection"><span class="header-section-number">14.3.3</span> Indirection</h3>
<p>Selon <span class="citation" data-cites="craig_uml_2005">Larman (<a href="references.html#ref-craig_uml_2005" role="doc-biblioref">2005</a>)</span>&nbsp;:</p>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Problème&nbsp;:</strong> Comment affecter les responsabilités pour éviter le couplage <span style="white-space:nowrap">direct ?</span><br>
<strong>Solution&nbsp;:</strong> Pour éviter le couplage direct, affectez la responsabilité à un objet qui sert d’intermédiaire avec les autres composants ou services.</p>
</div>
</div>
</div>
<p>Le «&nbsp;couplage direct&nbsp;» qui est évité est le couplage entre la classe Vente et les calculateurs de taxes externes. Le pattern Adaptateur (général) cherche à découpler le Client des classes nommées Adaptee, car chaque Adaptee a une interface API différente pour le même genre de «&nbsp;service&nbsp;». Alors, la responsabilité de s’adapter aux services différents est affectée à la hiérarchie de «&nbsp;classes intermédiaires&nbsp;», soit l’interface type IAdaptateurCalculTaxes et ses implémentations.</p>
</section>
<section id="protection-des-variations" class="level3" data-number="14.3.4">
<h3 data-number="14.3.4" class="anchored" data-anchor-id="protection-des-variations"><span class="header-section-number">14.3.4</span> Protection des variations</h3>
<p>Selon <span class="citation" data-cites="craig_uml_2005">Larman (<a href="references.html#ref-craig_uml_2005" role="doc-biblioref">2005</a>)</span>&nbsp;:</p>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Problème&nbsp;:</strong> Comment affecter les responsabilités aux objets, aux sous-systèmes et aux systèmes de sorte que les variations ou l’instabilité de ces éléments n’aient pas d’impact négatif sur les <span style="white-space:nowrap">autres ?</span><br>
<strong>Solution&nbsp;:</strong> Identifiez les points de variation ou d’instabilité prévisibles et affectez les responsabilités afin de créer une «&nbsp;interface&nbsp;» stable autour d’eux.</p>
</div>
</div>
</div>
<p>Les «&nbsp;variations&nbsp;» ou «&nbsp;l’instabilité&nbsp;» sont les calculateurs de taxes qui ne sont pas sous le contrôle des développeurs et développeuses du projet (ce sont des modules externes ayant chacun une interface API différente). Quant à l’«&nbsp;impact négatif sur les autres&nbsp;», il s’agit des modifications qu’auraient à faire les développeurs et développeuses sur la classe Vente chaque fois que l’on décide de supporter un autre calculateur de taxes (ou si l’interface API de ce dernier évolue).</p>
<p>Quant aux «&nbsp;responsabilités&nbsp;» à affecter, c’est la fonctionnalité commune de tous les calculateurs de taxes, soit le calcul de taxes. Pour ce qui est de l’«&nbsp;interface stable&nbsp;», il s’agit de la méthode <code>getTaxes()</code>, qui ne changera (probablement) jamais. Elle est définie dans l’interface type IAdaptateurCalculTaxes. Cette définition isole (protège) la classe Vente des modifications (ajout de nouveaux calculateurs ou changements de leur interface API).</p>
</section>
</section>
<section id="grasp-et-réusinage" class="level2" data-number="14.4">
<h2 data-number="14.4" class="anchored" data-anchor-id="grasp-et-réusinage"><span class="header-section-number">14.4</span> GRASP et réusinage</h2>
<p>Il y a des liens entre les GRASP et les activités de <a href="Réusinage.html">Réusinage (Refactorisation)</a>. Alors, un IDE qui automatise les réusinages peut vous aider à appliquer certains GRASP.</p>
<ul>
<li>GRASP Polymorphisme est relié à <a href="https://refactoring.com/catalog/replaceTypeCodeWithSubclasses.html"><em>Replace Type Code with Subclasses</em></a> et à <a href="https://refactoring.com/catalog/replaceConditionalWithPolymorphism.html"><em>Replace Conditional with Polymorphism</em></a> – attention, il vaut mieux appliquer ce dernier seulement quand il y a des instructions conditionnelles (<code>switch</code>) répétées à plusieurs endroits dans le code.</li>
<li>GRASP Fabrication Pure est relié à <a href="https://refactoring.com/catalog/extractClass.html"><em>Extract Class</em></a>.</li>
<li>GRASP Indirection est relié à <a href="https://refactoring.com/catalog/extractFunction.html"><em>Extract Function</em></a> et à <a href="https://refactoring.com/catalog/moveFunction.html"><em>Move Function</em></a>.</li>
</ul>
</section>
<section id="exercices" class="level2" data-number="14.5">
<h2 data-number="14.5" class="anchored" data-anchor-id="exercices"><span class="header-section-number">14.5</span> Exercices</h2>
<p>Pour ces exercices, suivez le modèle pour décortiquer le pattern Adaptateur, illustré à la <a href="#fig-Fig23_3">figure&nbsp;<span>14.3</span></a>.</p>
<p>Une bonne ressource pour les patterns GoF est la suivante&nbsp;:</p>
<p><a href="https://fuhrmanator.github.io/oodp-horstmann/htm/index_fr_en.html">https://fuhrmanator.github.io/oodp-horstmann/htm/index_fr_en.html</a></p>
<div class="callout callout-style-default callout-tip callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Astuce
</div>
</div>
<div class="callout-body-container callout-body">
<p>Il se peut que certains principes GRASP ne s’appliquent pas à un pattern <span style="white-space:nowrap">GoF !</span></p>
</div>
</div>
<div id="exr-GRASP_iterateur" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 14.1 (Itérateur) </strong></span>Identifiez les 4 principes GRASP dans le pattern <a href="https://fuhrmanator.github.io/oodp-horstmann/htm/Ch5/Ch5_fr.html#:~:text=Patron-,iterateur,-Contexte">Itérateur</a>, selon les directives présentées à la <a href="#sec-GRASP_Adaptateur"><span>Section&nbsp;14.3</span></a>.</p>
</div>
<div id="exr-GRASP_observateur" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 14.2 (Observateur) </strong></span>Identifiez les 4 principes GRASP dans le pattern <a href="https://fuhrmanator.github.io/oodp-horstmann/htm/Ch5/Ch5_fr.html#:~:text=Contr%C3%B4leur-,patron%20observateur,-Mod%C3%A8le">Observateur</a>, selon les directives présentées à la <a href="#sec-GRASP_Adaptateur"><span>Section&nbsp;14.3</span></a>.</p>
</div>
<div id="exr-GRASP_strategie" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 14.3 (Stratégie) </strong></span>Identifiez les 4 principes GRASP dans le pattern <a href="https://fuhrmanator.github.io/oodp-horstmann/htm/Ch5/Ch5_fr.html#:~:text=page-,patron%20strategie,-Strat%C3%A9gie">Stratégie</a>, selon les directives présentées à la <a href="#sec-GRASP_Adaptateur"><span>Section&nbsp;14.3</span></a>.</p>
</div>
<div id="exr-GRASP_composite" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 14.4 (Composite) </strong></span>Identifiez les 4 principes GRASP dans le pattern <a href="https://fuhrmanator.github.io/oodp-horstmann/htm/Ch5/Ch5_fr.html#:~:text=composants-,patron%20composite,-Contexte">Composite</a>, selon les directives présentées à la <a href="#sec-GRASP_Adaptateur"><span>Section&nbsp;14.3</span></a>.</p>
</div>
<div id="exr-GRASP_decorateur" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 14.5 (Décorateur) </strong></span>Identifiez les 4 principes GRASP dans le pattern <a href="https://fuhrmanator.github.io/oodp-horstmann/htm/Ch5/Ch5_fr.html#:~:text=d%C3%A9filement%20(Scroll%20Bars)-,Patron%20D%C3%A9corateur,Contexte">Décorateur</a>, selon les directives présentées à la <a href="#sec-GRASP_Adaptateur"><span>Section&nbsp;14.3</span></a>.</p>
</div>
<div id="exr-GRASP_methode_template" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 14.6 (Méthode Template) </strong></span>Identifiez les 4 principes GRASP dans le pattern <a href="https://fuhrmanator.github.io/oodp-horstmann/htm/Ch6/Ch6_fr.html#:~:text=java-,patron%20template%20method,-Contexte">Méthode Template</a>, selon les directives présentées à la <a href="#sec-GRASP_Adaptateur"><span>Section&nbsp;14.3</span></a>.</p>
</div>
<div id="exr-GRASP_commande" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 14.7 (Commande) </strong></span>Identifiez les 4 principes GRASP dans le pattern <a href="https://fuhrmanator.github.io/oodp-horstmann/htm/Ch10/Ch10_fr.html#:~:text=java-,le%20patron%20command,-Contexte">Commande</a>, selon les directives présentées à la <a href="#sec-GRASP_Adaptateur"><span>Section&nbsp;14.3</span></a>.</p>
</div>
<div id="exr-GRASP_methode_fabrique" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 14.8 (Méthode Fabrique) </strong></span>Identifiez les 4 principes GRASP dans le pattern <a href="https://fuhrmanator.github.io/oodp-horstmann/htm/Ch10/Ch10_fr.html#:~:text=methodes%20de%20fabrique%20(factory%20methods)">Méthode de fabrique</a>, selon les directives présentées à la <a href="#sec-GRASP_Adaptateur"><span>Section&nbsp;14.3</span></a>.</p>
</div>
<div id="exr-GRASP_proxy" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 14.9 (Proxy) </strong></span>Identifiez les 4 principes GRASP dans le pattern <a href="https://fuhrmanator.github.io/oodp-horstmann/htm/Ch10/Ch10_fr.html#:~:text=de%20m%C3%A9thode%20distante-,Le%20patron%20PROXY,Contexte,-Une%20classe">Proxy</a>, selon les directives présentées à la <a href="#sec-GRASP_Adaptateur"><span>Section&nbsp;14.3</span></a>.</p>
</div>
<div id="exr-GRASP_facade" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 14.10 (Façade) </strong></span>Identifiez les 4 principes GRASP dans le pattern <a href="https://fuhrmanator.github.io/oodp-horstmann/htm/Ch7/Ch7_fr.html#:~:text=la%20classe%20fa%C3%A7ade-,le%20pattern%20facade,-Contexte">Façade</a>, selon les directives présentées à la <a href="#sec-GRASP_Adaptateur"><span>Section&nbsp;14.3</span></a>.</p>
</div>
<div id="exr-Adaptateur_Maps" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercice 14.11 (Adaptateur pour Maps) </strong></span>Proposez une mise en œuvre du pattern GoF Adaptateur pour un système de livraison qui peut être configuré avec trois variantes du service de calcul d’itinéraires&nbsp;:</p>
<ul>
<li><a href="https://developers.google.com/maps/documentation/directions">Google Maps</a><span style="white-space:nowrap"> ;</span></li>
<li><a href="https://www.microsoft.com/en-us/maps/routing#routing">Bing Maps</a><span style="white-space:nowrap"> ;</span></li>
<li><a href="https://developer.apple.com/documentation/mapkitjs/">Apple Maps</a>.</li>
</ul>
<p>Le système veut obtenir une liste d’étapes (des directions) pour se rendre à une destination à partir d’un point de départ. L’utilisateur ou l’utilisatrice du système pourra décider lequel des services lui convient dans les préférences.</p>
<p>Le but de l’exercice est de déterminer l’interface stable (GRASP Protection des variations) étant donné les variantes des services de calcul d’itinéraires. Cela peut être un diagramme de classes réalisé avec PlantUML.</p>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography" style="display: none">
<div id="ref-GoF1994" class="csl-entry" role="doc-biblioentry">
Gamma, E., Helm, R., Johnson, R., et Vlissides, J. (1994). <em>Design <span>Patterns</span>: <span>Elements</span> of <span>Reusable</span> <span>Object</span>-<span>Oriented</span> <span>Software</span></em> (1ʳᵉ éd.). Reading, Mass&nbsp;: Addison-Wesley Professional. Repéré à <a href="http://amazon.com/o/ASIN/0201633612/">http://amazon.com/o/ASIN/0201633612/</a>
</div>
<div id="ref-craig_uml_2005" class="csl-entry" role="doc-biblioentry">
Larman, C. (2005). <em><span>UML</span> 2 et les design patterns</em> (3ᵉ éd.). Paris&nbsp;: Village Mondial.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Outils-UML.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Outils pour la modélisation UML</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Fiabilité.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Fiabilité</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>